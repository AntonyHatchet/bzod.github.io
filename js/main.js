require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery.min",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,t,a,r){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a,"==":e==a}[t]}),Handlebars.registerHelper("ifCond",function(e,t,a,r){switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"<":return a>e?r.fn(this):r.inverse(this);case"<=":return a>=e?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var t=$(e.target).closest("a").attr("href");switch(t){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/story":app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/antiq":app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/antiq":app.printVideo("antiq"),setTimeout(function(){app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(t,{trigger:!1,replace:!0})},100);break;case"#video/story":app.printVideo("story"),setTimeout(function(){app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням")},100);break;case"#video/history":app.printVideo("history"),setTimeout(function(){app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории")},100);break;case"#games/antiq":app.printMap("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.testCleared(),Backbone.history.fragment=null,Backbone.history.navigate("#lessons",!0);break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"www.tretyakovgallery.ru":window.open("http://www.tretyakovgallery.ru/","_blank")}},initialize:function(){var e=this;this.on("Display:Load",function(t){e.render()})},route:function(e,t){this.link=e,t?(this.loadModules(t),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var t=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(a,r){_.extend(t,a),t.html=$(r),t.loadCss(e,"display"),t.trigger("Display:Load",e)})},loadModules:function(e){var t=this;e.forEach(function(a,r){require(["../../template/modules/"+a+"/"+a,"text!../../template/modules/"+a+"/"+a+".html"],function(o,n){t[a+"Html"]=$(n),_.extend(t,o),t.loadCss(a,"module"),e.length-1===r&&t.trigger("Module:Load",e)})})},loadCss:function(e,t){var a="display"===t?"displays":"modules",r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="../../template/"+a+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(r)},renderHandlebarsTemplate:function(e,t){var a=Handlebars.compile($(e).html());return a(t)}}),app=new App;var t=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),a=new t;a.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),a.on("route:gallery",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:games",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reader",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:video",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reset",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start({pushState:!1}),function(e){e.backgroundVideo=function(t,a){var r={videoid:"video_background",autoplay:!1,loop:!1,preload:!0},o=this;o.settings={};var n=function(){o.settings=e.extend({},r,a),o.el=t,i()},i=function(){var t="",a="",r="",n="",i=o.settings.preload,p=o.settings.autoplay,d=o.settings.loop;a=i?'preload="false"':"",r=p?'autoplay="false"':"",n=d?'loop="false"':"",t+='<video id="'+o.settings.videoid+'"'+a+r+n,o.settings.poster&&(t+=' poster="'+o.settings.poster+'" '),t+='style="display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:2;width:100%;height:100%;">';for(var c=0;c<o.settings.types.length;c++)t+='<source src="'+o.settings.path+o.settings.filename+"."+o.settings.types[c]+'" type="video/'+o.settings.types[c]+'" />';t+="</video>",o.el.append(t),o.videoEl=document.getElementById(o.settings.videoid),o.$videoEl=e(o.videoEl),o.$videoEl.fadeIn(0),s()},s=function(){var e=p();o.$videoEl.width(e*o.settings.width),o.$videoEl.height(e*o.settings.height),"undefined"!=typeof o.settings.align&&d()},p=function(){var t=e(window).width(),a=e(window).height(),r=t/a,n=o.settings.width/o.settings.height,i=a/o.settings.height;return r>=n&&(i=t/o.settings.width),i},d=function(){var t=(e(window).width()>>1)-(o.$videoEl.width()>>1)|0,a=(e(window).height()>>1)-(o.$videoEl.height()>>1)|0;return"centerXY"==o.settings.align?void o.$videoEl.css({left:t,top:a}):"centerX"==o.settings.align?void o.$videoEl.css("left",t):"centerY"==o.settings.align?void o.$videoEl.css("top",a):void 0};n(),e(window).resize(function(){s()})}}($),function(e){var t={init:function(){e(window).resize(function(){e(document).setPoints("setProportion")})},setProportion:function(){if(e(".maps.active .responsive-image").length&&e(".maps.active .set-points").length){var t=e(".maps.active .responsive-image").css("backgroundImage").replace(/url\("|"\)/gi,""),a=new Image;a.onload=function(){var t=a.width,r=a.height,o=e(".maps.active .set-points").get(),n=e(".maps.active .responsive-image").get(),i=e(n).width(),s=e(n).height(),p=t/r,d=i/s;if(d>p){var c=parseInt(r*i/t);e(o).height(c).width("100%")}if(p>d){var l=parseInt(t*s/r);e(o).width(l).height("100%")}},a.src=t}}};e.fn.setPoints=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Метод с именем "+a+" не существует в setPoints"):t.init.apply(this,arguments)},e(document).setPoints("init")}($)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInByaW50Qm9va1BhZ2VzIiwiYnJlYWRjcnVtYnNSZW5kZXIiLCJnb1RvcCIsInJlcGxhY2UiLCJwcmludFZpZGVvIiwic2V0VGltZW91dCIsImdvQm90dG9tIiwicHJpbnRNYXAiLCJnb0JhY2siLCJ0ZXN0QnJlYWRjcnVtYnNSZW5kZXIiLCJnb0Zyb250IiwiZ2V0QWN0aXZlVGFiIiwidGVzdENsZWFyZWQiLCJmcmFnbWVudCIsImF1ZGlvU3dpY3RjaGVyIiwiZGVhY3RpdmF0ZVF1ZXN0aW9uIiwiY2hlY2tJbWFnZVByb2dyZXNzIiwid2luZG93IiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwicm91dGUiLCJsaW5rIiwibW9kdWxlc0xpc3QiLCJsb2FkTW9kdWxlcyIsIm9mZiIsIm1vZHVsZXMiLCJsb2FkVGVtcGxhdGUiLCJjb25zb2xlIiwibG9nIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsImxlbmd0aCIsIm1kIiwicGFydFVwbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJyZWwiLCJocmVmIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsInJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZSIsInNlbGVjdG9yIiwiZGF0YSIsInRlbXBsYXRlIiwiY29tcGlsZSIsIkFwcFJvdXRlciIsIlJvdXRlciIsInJvdXRlcyIsImxlc3NvbnMiLCJnYW1lcy86dGVzdCIsImJvb2svOm5hbWUiLCJ2aWRlby86bmFtZSIsInJvdXRlciIsInN0YXJ0IiwicHVzaFN0YXRlIiwiYmFja2dyb3VuZFZpZGVvIiwiZGVmYXVsdHMiLCJ2aWRlb2lkIiwiYXV0b3BsYXkiLCJsb29wIiwicHJlbG9hZCIsInBsdWdpbiIsInNldHRpbmdzIiwiaW5pdCIsImJ1aWxkVmlkZW8iLCJwcmVsb2FkU3RyaW5nIiwiYXV0b3BsYXlTdHJpbmciLCJsb29wU3RyaW5nIiwiX3ByZWxvYWQiLCJfYXV0b3BsYXkiLCJfbG9vcCIsInBvc3RlciIsInR5cGVzIiwicGF0aCIsImZpbGVuYW1lIiwiYXBwZW5kIiwidmlkZW9FbCIsImdldEVsZW1lbnRCeUlkIiwiJHZpZGVvRWwiLCJmYWRlSW4iLCJzZXRQcm9wb3J0aW9uIiwicHJvcG9ydGlvbiIsImdldFByb3BvcnRpb24iLCJ3aWR0aCIsImhlaWdodCIsImFsaWduIiwiY2VudGVyVmlkZW8iLCJ3aW5kb3dXaWR0aCIsIndpbmRvd0hlaWdodCIsIndpbmRvd1Byb3BvcnRpb24iLCJvcmlnUHJvcG9ydGlvbiIsImNlbnRlclgiLCJjZW50ZXJZIiwibGVmdCIsInRvcCIsInJlc2l6ZSIsIm1ldGhvZHMiLCJzZXRQb2ludHMiLCJpbWdTcmMiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIndpZHRoSW1nIiwiaGVpZ2h0SW1nIiwiY29udGFpbmVyU2V0IiwiZ2V0IiwiY29udGFpbmVyIiwid2lkdGhDb250YWluZXIiLCJoZWlnaHRDb250YWluZXIiLCJhc3BlY3RyYXRpb0ltYWdlIiwiYXNwZWN0cmF0aW9Db250YWluZXIiLCJyZXN1bHRIZWlnaHQiLCJwYXJzZUludCIsInJlc3VsdFdpZHRoIiwic3JjIiwibWV0aG9kIiwiYXBwbHkiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsUUFDUEMsUUFBUyxTQUNUQyxPQUNDQyxPQUFVLHlCQUNWQyxTQUFZLG9CQUNaQyxLQUFRLFlBQ1JDLFdBQWMsd0JBQ2RDLFdBQWMsd0JBQ2RDLFNBQVksZ0NBRWJDLE1BQ0NMLFVBQ0NNLE1BQU8sYUFBYyxhQUt4QixJQUFJQyxLQUNIQyxVQUNEYixVQUNDLGFBQ0EsU0FDQSxPQUNBLFdBQ0EsYUFDQSxZQUNFLFNBQVNRLEdBQ1hLLFdBQWFMLEVBRWJLLFdBQVdDLGVBQWUsT0FBUSxTQUFTQyxFQUFRQyxFQUFVQyxFQUFRQyxHQUlqRSxNQUhBSCxHQUFTSSxXQUFXSixHQUNwQkUsRUFBU0UsV0FBV0YsSUFHaEJHLElBQUtMLEVBQVNFLEVBQ2RJLElBQUtOLEVBQVNFLEVBQ2RLLElBQUtQLEVBQVNFLEVBQ2RNLElBQUtSLEVBQVNFLEVBQ2RPLElBQUtULEVBQVNFLEVBQ2RRLEtBQU1WLEdBQVVFLEdBQ2xCRCxLQUVOSCxXQUFXQyxlQUFlLFNBQVUsU0FBVVksRUFBSVYsRUFBVVcsRUFBSVQsR0FFNUQsT0FBUUYsR0FDSixJQUFLLEtBQ0QsTUFBUVUsSUFBTUMsRUFBTVQsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDM0QsS0FBSyxNQUNELE1BQVFILEtBQU9DLEVBQU1ULEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzVELEtBQUssSUFDRCxNQUFhRixHQUFMRCxFQUFXUixFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMxRCxLQUFLLEtBQ0QsTUFBY0YsSUFBTkQsRUFBWVIsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDM0Qs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LE1BQ2hERSxFQUFpQmxJLEVBQUVpSSxHQUFXdkIsUUFDOUJ5QixFQUFrQm5JLEVBQUVpSSxHQUFXdEIsU0FDL0J5QixFQUFtQlAsRUFBU0MsRUFDNUJPLEVBQXVCSCxFQUFlQyxDQUMxQyxJQUFJRSxFQUF1QkQsRUFBa0IsQ0FDNUMsR0FBSUUsR0FBZUMsU0FBVVQsRUFBWUksRUFBZ0JMLEVBQ3pEN0gsR0FBRStILEdBQWNwQixPQUFPMkIsR0FBYzVCLE1BQU0sUUFFNUMsR0FBMkIwQixFQUF2QkMsRUFBeUMsQ0FDNUMsR0FBSUcsR0FBY0QsU0FBVVYsRUFBV00sRUFBaUJMLEVBQ3hEOUgsR0FBRStILEdBQWNyQixNQUFNOEIsR0FBYTdCLE9BQU8sVUFHNUNlLEVBQUllLElBQU1oQixJQUtiekgsR0FBRVIsR0FBR2dJLFVBQVksU0FBU2tCLEdBRXpCLE1BQUluQixHQUFRbUIsR0FDSm5CLEVBQVNtQixHQUFTQyxNQUFPbEosS0FBTW1KLE1BQU1DLFVBQVVDLE1BQU1DLEtBQU1DLFVBQVcsSUFDaEQsZ0JBQVhOLElBQXlCQSxNQUczQzFJLEdBQUVpSixNQUFPLGtCQUFxQlAsRUFBUyw4QkFGaENuQixFQUFRakMsS0FBS3FELE1BQU9sSixLQUFNdUosWUFNbkNoSixFQUFFd0QsVUFBVWdFLFVBQVUsU0FFcEJ4SCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZS5jb25maWcoe1xyXG5cdGJhc2VVcmw6ICd2ZW5kb3InLFxyXG5cdHBhdGhzOiB7XHJcblx0XHQnanF1ZXJ5JzogJ2pxdWVyeS9kaXN0L2pxdWVyeS5taW4nLFxyXG5cdFx0J2JhY2tib25lJzogJ2JhY2tib25lL2JhY2tib25lJyxcclxuXHRcdCd0ZXh0JzogJ3RleHQvdGV4dCcsXHJcblx0XHQndW5kZXJzY29yZSc6ICd1bmRlcnNjb3JlL3VuZGVyc2NvcmUnLFxyXG5cdFx0J2hhbmRsZWJhcnMnOiAnaGFuZGxlYmFycy9oYW5kbGViYXJzJyxcclxuXHRcdCdwYXJhbGxheCc6ICdwYXJhbGxheC9kZXBsb3kvcGFyYWxsYXgubWluJ1xyXG5cdH0sXHJcblx0c2hpbToge1xyXG5cdFx0J2JhY2tib25lJzoge1xyXG5cdFx0XHRkZXBzOiBbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5J11cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxudmFyIGFwcCxcclxuXHRIYW5kbGViYXJzO1xyXG5yZXF1aXJlKFtcclxuXHQnaGFuZGxlYmFycycsXHJcblx0J2pxdWVyeScsXHJcblx0J3RleHQnLFxyXG5cdCdiYWNrYm9uZScsXHJcblx0J3VuZGVyc2NvcmUnLFxyXG5cdFwicGFyYWxsYXhcIlxyXG5dLCBmdW5jdGlvbihoYW5kbGViYXJzKSB7XHJcblx0SGFuZGxlYmFycyA9IGhhbmRsZWJhcnM7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gSGFuZGxlYmFycyBIZWxwZXJzLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwibWF0aFwiLCBmdW5jdGlvbihsdmFsdWUsIG9wZXJhdG9yLCBydmFsdWUsIG9wdGlvbnMpIHtcclxuXHQgICAgbHZhbHVlID0gcGFyc2VGbG9hdChsdmFsdWUpO1xyXG5cdCAgICBydmFsdWUgPSBwYXJzZUZsb2F0KHJ2YWx1ZSk7XHJcblx0ICAgICAgICBcclxuXHQgICAgcmV0dXJuIHtcclxuXHQgICAgICAgIFwiK1wiOiBsdmFsdWUgKyBydmFsdWUsXHJcblx0ICAgICAgICBcIi1cIjogbHZhbHVlIC0gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIqXCI6IGx2YWx1ZSAqIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiL1wiOiBsdmFsdWUgLyBydmFsdWUsXHJcblx0ICAgICAgICBcIiVcIjogbHZhbHVlICUgcnZhbHVlLFxyXG5cdCAgICAgICAgXCI9PVwiOiBsdmFsdWUgPT0gcnZhbHVlXHJcblx0ICAgIH1bb3BlcmF0b3JdO1xyXG5cdH0pO1xyXG5cdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmQ29uZCcsIGZ1bmN0aW9uICh2MSwgb3BlcmF0b3IsIHYyLCBvcHRpb25zKSB7XHJcblx0XHJcblx0ICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuXHQgICAgICAgIGNhc2UgJz09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc9PT0nOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgPT09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJzw9JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDw9IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID4gdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJz49JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID49IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICcmJic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSAmJiB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnfHwnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgfHwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEFwcCAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdEFwcCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcclxuXHRcdGVsOiAkKCcjYXBwJyksXHJcblx0XHRldmVudHM6IHtcclxuXHQgICAgXCJjbGljayBhXCI6XCJvcGVuXCJcclxuXHQgIH0sXHJcblx0ICBvcGVuOiBmdW5jdGlvbihlKXtcclxuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFxyXG5cdFx0XHR2YXIgdXJsID0gJChlLnRhcmdldCkuY2xvc2VzdChcImFcIikuYXR0cihcImhyZWZcIik7XHJcblx0XHJcblx0XHRcdHN3aXRjaCAodXJsKXtcclxuXHRcdFx0XHRjYXNlIFwiI2xlc3NvbnNcIjpcclxuXHRcdFx0XHRcdCQoXCJodG1sLGJvZHlcIikuY3NzKFwib3ZlcmZsb3cteVwiLFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludEJvb2tQYWdlcyhcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQmNC70LvRjtGB0YLRgNCw0YbQuNC4INC6INCx0LDRgdC90Y/QvFwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb1RvcCgpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNib29rL2FudGlxXCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vYW50aXFcIjpcclxuXHRcdFx0XHQgICAgYXBwLnByaW50VmlkZW8oXCJhbnRpcVwiKTtcclxuXHRcdFx0XHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdCAgICBcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdCAgICBcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHQgICAgfSwxMDApO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50VmlkZW8oXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHR9LDEwMCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3ZpZGVvL2hpc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludFZpZGVvKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdH0sMTAwKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcImFudGlxXCIpO1xyXG5cdFx0XHRcdFx0Ly9hcHAuc2hvd1Rlc3RQYWdlcyhcImFudGlxXCIpO1xyXG5cdFx0XHRcdCBcdGFwcC5nb0JhY2soKTtcclxuXHQgICAgIFx0XHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIixcImFudGlxXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwic3RvcnlcIik7XHJcblx0XHRcdFx0XHQvL2FwcC5zaG93VGVzdFBhZ2VzKFwic3RvcnlcIik7XHJcblx0XHRcdCAgICBcdGFwcC5nb0JhY2soKTtcclxuXHQgICAgICBcdFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCR0LDRgdC90Lgg0JrRgNGL0LvQvtCy0LBcIixcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0Ly9hcHAuc2hvd1Rlc3RQYWdlcyhcImhpc3RvcnlcIik7XHJcblx0XHRcdCAgICBcdGFwcC5nb0JhY2soKTtcclxuXHQgICAgXHRcdFx0YXBwLnRlc3RCcmVhZGNydW1ic1JlbmRlcihcItCY0LPRgNCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIsXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnb0Zyb250XCI6XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjcmVzZXRcIjpcclxuXHRcdFx0XHRcdGFwcC50ZXN0Q2xlYXJlZCgpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5mcmFnbWVudCA9IG51bGw7XHJcblx0ICAgICAgICBcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHRydWUpO1xyXG5cdFx0XHRcdFx0Ly9CYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNzb3VuZFwiOlxyXG5cdFx0XHRcdFx0YXBwLmF1ZGlvU3dpY3RjaGVyKCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Zyb21UZXN0VG9WaWRlb1wiOlxyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dldFJldmFyZC1hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLmRlYWN0aXZhdGVRdWVzdGlvbih0aGlzKTtcclxuXHRcdFx0XHRcdGFwcC5jaGVja0ltYWdlUHJvZ3Jlc3MoKTtcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQmNC70LvRjtGB0YLRgNCw0YbQuNC4INC6INCx0LDRgdC90Y/QvFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLWhpc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcInd3dy50cmV0eWFrb3ZnYWxsZXJ5LnJ1XCI6XHJcblx0XHRcdFx0XHR3aW5kb3cub3BlbignaHR0cDovL3d3dy50cmV0eWFrb3ZnYWxsZXJ5LnJ1LycsICdfYmxhbmsnKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0ICB9LFxyXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcclxuXHRcdFx0dGhpcy5vbignRGlzcGxheTpMb2FkJywgZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0XHRzZWxmLnJlbmRlcigpO1xyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ9Cg0LXQvdC00LXRgCDRjdC60YDQsNC90LAgXCInICsgZGlzcGxheU5hbWUgKyAnXCIg0LfQsNCy0LXRgNGI0LXQvScpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZygn0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC40LvQvtC20LXQvdC40Y8g0LfQsNCy0LXRgNGI0LXQvdCwJyk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cm91dGU6IGZ1bmN0aW9uKGxpbmssIG1vZHVsZXNMaXN0KXtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcItCX0LDQv9GD0YHQutCw0LXQvCBSb3V0ZSDQuiBcIiwgbGluaywgXCIgYyDQvNC+0LTRg9C70Y/QvNC4IFwiLG1vZHVsZXNMaXN0KVxyXG5cdFx0XHR0aGlzLmxpbmsgPSBsaW5rO1xyXG5cdFxyXG5cdFx0XHQvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0L/QvtC00LrQu9GO0YfQsNC10LzRi9GFINC80L7QtNGD0LvQtdC5LCDQtdGB0LvQuCDQuNGFINC90LXRgiDQt9Cw0LPRgNGD0LbQsNC10Lwg0YLQvtC70YzQutC+INGI0LDQsdC70L7QvVxyXG5cdFx0XHRpZiAoIW1vZHVsZXNMaXN0KXtcclxuXHRcdFx0XHR0aGlzLmxvYWRUZW1wbGF0ZShsaW5rKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyDQndCw0YjQu9C4INC80L7QtNGD0LvRjCwg0LjQu9C4INC80L7QtNGD0LvQuC4g0JfQsNC/0YPRgdC60LDQtdC8INC40YUg0LfQsNCz0YDRg9C30LrRgyDQsiDQutC+0L3RgtC10LrRgdGCINC/0YDQuNC70L7QttC10L3QuNGPLlxyXG5cdFx0XHRcdHRoaXMubG9hZE1vZHVsZXMobW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vINCc0L7QtNGD0LvRjCDQuNC70Lgg0LzQvtC00YPQu9C4INC30LDQs9GA0YPQttC10L3Riy4g0J3QsNGH0LjQvdCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINGI0LDQsdC70L7QvdCwLlxyXG5cdFx0XHRcdHRoaXMub2ZmKCdNb2R1bGU6TG9hZCcpLm9uKCdNb2R1bGU6TG9hZCcsIGZ1bmN0aW9uKG1vZHVsZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKHRoaXMubGluayk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQvNC+0LTRg9C70Y8o0LXQuSlcIicgKyBtb2R1bGVzICsgJ1wiINC30LDQstC10YDRiNC10L3QsCcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ9CX0LDQs9GA0YPQt9C60LAg0K3QutGA0LDQvdCwXCInICsgdGhpcy5saW5rICsgJ1wiINC90LDRh9Cw0LvQsNGB0YwnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRUZW1wbGF0ZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUsXHJcblx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUgKyAnLmh0bWwnLFxyXG5cdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ9Ct0LrRgNCw0L0gXCInICsgZGlzcGxheU5hbWUgKyAnXCIg0LfQsNCz0YDRg9C20LXQvScpO1xyXG5cdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRzZWxmLmh0bWwgPSAkKGh0bWwpO1xyXG5cdFx0XHRcdHNlbGYubG9hZENzcyhkaXNwbGF5TmFtZSwgJ2Rpc3BsYXknKTtcclxuXHRcdFx0XHRzZWxmLnRyaWdnZXIoJ0Rpc3BsYXk6TG9hZCcsIGRpc3BsYXlOYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0bG9hZE1vZHVsZXM6IGZ1bmN0aW9uKG1vZHVsZXNMaXN0KSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0Ly/Ql9Cw0LPRgNGD0LbQsNC10Lwg0LzQvtC00YPQu9C4LlxyXG5cdFx0XHRtb2R1bGVzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG1vZHVsZSwgaSl7XHJcblx0XHRcdFx0Ly8gaWYgKCFfLmluY2x1ZGUoc2VsZi5sb2FkZWRNb2R1bGVzLCBtb2R1bGUpKSB7XHJcblx0XHRcdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHRcdFx0Jy4uLy4uL3RlbXBsYXRlL21vZHVsZXMvJyArIG1vZHVsZSArICcvJyArIG1vZHVsZSAsXHJcblx0XHRcdFx0XHRcdCd0ZXh0IS4uLy4uL3RlbXBsYXRlL21vZHVsZXMvJyArIG1vZHVsZSArICcvJyArIG1vZHVsZSArICcuaHRtbCdcclxuXHRcdFx0XHRcdF0sIGZ1bmN0aW9uKGpzLCBodG1sKSB7XHJcblx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coJ9Cc0L7QtNGD0LvRjCBcIicgKyBtb2R1bGUgKyAnXCIg0LfQsNCz0YDRg9C20LXQvScpO1xyXG5cdFx0XHRcdFx0XHRzZWxmW21vZHVsZSArICdIdG1sJ10gPSAkKGh0bWwpO1xyXG5cdFx0XHRcdFx0XHRfLmV4dGVuZChzZWxmLCBqcyk7XHJcblx0XHRcdFx0XHRcdHNlbGYubG9hZENzcyhtb2R1bGUsICdtb2R1bGUnKTtcclxuXHRcdFx0XHRcdFx0aWYoKG1vZHVsZXNMaXN0Lmxlbmd0aCAtIDEpID09PSBpKXtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLnRyaWdnZXIoJ01vZHVsZTpMb2FkJywgbW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHQvLyB9ZWxzZSBpZiAobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSA9PSBpKXtcclxuXHRcdFx0XHQvLyBcdGNvbnNvbGUubG9nKCdtb2R1bGVzTGlzdC5sZW5ndGgnLCBtb2R1bGVzTGlzdC5sZW5ndGgpXHJcblx0XHRcdFx0Ly8gXHRzZWxmLnRyaWdnZXIoJ01vZHVsZTpMb2FkJywgbW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vIH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0bG9hZENzczogZnVuY3Rpb24obW9kdWxlLCBtZCkge1xyXG5cdFx0XHR2YXIgcGFydFVwbCA9IG1kID09PSAnZGlzcGxheScgPyAnZGlzcGxheXMnIDogJ21vZHVsZXMnO1xyXG5cdFx0XHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG5cdFx0XHRsaW5rLnR5cGUgPSBcInRleHQvY3NzXCI7XHJcblx0XHRcdGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcblx0XHRcdGxpbmsuaHJlZiA9ICcuLi8uLi90ZW1wbGF0ZS8nICsgcGFydFVwbCArICcvJyArIG1vZHVsZSArICcvJyArIG1vZHVsZSArICcuY3NzJztcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGxpbmspO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdHJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZTogZnVuY3Rpb24oc2VsZWN0b3IsZGF0YSkge1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCfQodC+0LfQtNCw0LXQvCDRiNCw0LHQu9C+0L0gSGFuZGxlYmFycycsIHNlbGVjdG9yLCBkYXRhKTtcclxuXHRcclxuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKCQoc2VsZWN0b3IpLmh0bWwoKSk7XHJcblx0XHRcdHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRhcHAgPSBuZXcgQXBwKCk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gUm91dGVyIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0dmFyIEFwcFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xyXG5cdCAgICByb3V0ZXM6IHtcclxuXHQgICAgICAgIFwiXCI6IFwiZGVmYXVsdFJvdXRlXCIsXHJcblx0ICAgICAgICBcImxlc3NvbnNcIjpcImdhbGxlcnlcIixcclxuXHQgICAgICAgIFwiZ2FtZXMvOnRlc3RcIjpcImdhbWVzXCIsXHJcblx0ICAgICAgICBcImJvb2svOm5hbWVcIjpcInJlYWRlclwiLFxyXG5cdCAgICAgICAgXCJ2aWRlby86bmFtZVwiOlwidmlkZW9cIlxyXG5cdCAgICAgICAgLy8gbWF0Y2hlcyBodHRwOi8vZXhhbXBsZS5jb20vI2FueXRoaW5nLWhlcmVcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8vIEluaXRpYXRlIHRoZSByb3V0ZXJcclxuXHR2YXIgcm91dGVyID0gbmV3IEFwcFJvdXRlcjtcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmRlZmF1bHRSb3V0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ21haW5TY3JlZW4nLCBbJ3ByZWxvYWRlciddKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FsbGVyeScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FtZXMnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOnJlYWRlcicsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6dmlkZW8nLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOnJlc2V0JywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0Ly8gU3RhcnQgQmFja2JvbmUgaGlzdG9yeSBhIG5lY2Vzc2FyeSBzdGVwIGZvciBib29rbWFya2FibGUgVVJMJ3NcclxuXHRCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KHtwdXNoU3RhdGUgOiBmYWxzZX0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEJhY2tncm91bmRSZXNpemVyIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0LypcclxuXHQqIGpRdWVyeSBCYWNrZ3JvdW5kIHZpZGVvIHBsdWdpbiBmb3IgalF1ZXJ5XHJcblx0KiAtLS1cclxuXHQqIENvcHlyaWdodCAyMDExLCBWaWN0b3IgQ291bG9uIChodHRwOi8vdmljdG9yY291bG9uLmZyKVxyXG5cdCogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCwgQlNELCBhbmQgR1BMIExpY2Vuc2VzLlxyXG5cdCogYmFzZWQgb24galF1ZXJ5IFBsdWdpbiBCb2lsZXJwbGF0ZSAxLjNcclxuXHQqL1xyXG5cdChmdW5jdGlvbigkKSB7XHJcblx0XHJcblx0ICAkLmJhY2tncm91bmRWaWRlbyA9IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XHJcblx0XHJcblx0ICAgIHZhciBkZWZhdWx0cyA9IHtcclxuXHQgICAgICB2aWRlb2lkOiBcInZpZGVvX2JhY2tncm91bmRcIixcclxuXHQgICAgICBhdXRvcGxheTogZmFsc2UsXHJcblx0ICAgICAgbG9vcDogZmFsc2UsXHJcblx0ICAgICAgcHJlbG9hZDogdHJ1ZVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBwbHVnaW4gPSB0aGlzO1xyXG5cdFxyXG5cdCAgICBwbHVnaW4uc2V0dGluZ3MgPSB7fVxyXG5cdFxyXG5cdCAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICAgIHBsdWdpbi5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XHJcblx0ICAgICAgcGx1Z2luLmVsID0gZWw7XHJcblx0XHJcblx0ICAgICAgYnVpbGRWaWRlbygpO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBidWlsZFZpZGVvID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgIHZhciBodG1sID0gJycsXHJcblx0ICAgICAgICAgIHByZWxvYWRTdHJpbmcgPSAnJyxcclxuXHQgICAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnJyxcclxuXHQgICAgICAgICAgbG9vcFN0cmluZyA9ICcnLFxyXG5cdCAgICAgICAgICBfcHJlbG9hZCA9IHBsdWdpbi5zZXR0aW5ncy5wcmVsb2FkLFxyXG5cdCAgICAgICAgICBfYXV0b3BsYXkgPSBwbHVnaW4uc2V0dGluZ3MuYXV0b3BsYXksXHJcblx0ICAgICAgICAgIF9sb29wID0gcGx1Z2luLnNldHRpbmdzLmxvb3A7XHJcblx0XHJcblx0ICAgICAgaWYgKF9wcmVsb2FkKSB7XHJcblx0ICAgICAgICBwcmVsb2FkU3RyaW5nID0gJ3ByZWxvYWQ9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgcHJlbG9hZFN0cmluZyA9ICcnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAoX2F1dG9wbGF5KSB7XHJcblx0ICAgICAgICBhdXRvcGxheVN0cmluZyA9ICdhdXRvcGxheT1cImZhbHNlXCInO1xyXG5cdCAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICBhdXRvcGxheVN0cmluZyA9ICcnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAoX2xvb3ApIHtcclxuXHQgICAgICAgIGxvb3BTdHJpbmcgPSAnbG9vcD1cImZhbHNlXCInO1xyXG5cdCAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICBsb29wU3RyaW5nID0gJyc7XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIGh0bWwgKz0gJzx2aWRlbyBpZD1cIicrcGx1Z2luLnNldHRpbmdzLnZpZGVvaWQrJ1wiJyArIHByZWxvYWRTdHJpbmcgKyBhdXRvcGxheVN0cmluZyArIGxvb3BTdHJpbmc7XHJcblx0XHJcblx0ICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5wb3N0ZXIpIHtcclxuXHQgICAgICAgIGh0bWwgKz0gJyBwb3N0ZXI9XCInICsgcGx1Z2luLnNldHRpbmdzLnBvc3RlciArICdcIiAnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBodG1sICs9ICdzdHlsZT1cImRpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7Ym90dG9tOjA7cmlnaHQ6MDt6LWluZGV4OjI7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtcIj4nO1xyXG5cdCAgICAgIGZvcih2YXIgaT0wOyBpIDwgcGx1Z2luLnNldHRpbmdzLnR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0ICAgICAgICBodG1sICs9ICc8c291cmNlIHNyYz1cIicrcGx1Z2luLnNldHRpbmdzLnBhdGgrcGx1Z2luLnNldHRpbmdzLmZpbGVuYW1lKycuJytwbHVnaW4uc2V0dGluZ3MudHlwZXNbaV0rJ1wiIHR5cGU9XCJ2aWRlby8nK3BsdWdpbi5zZXR0aW5ncy50eXBlc1tpXSsnXCIgLz4nO1xyXG5cdCAgICAgIH1cclxuXHQgICAgICBodG1sICs9ICc8L3ZpZGVvPic7XHJcblx0ICAgICAgcGx1Z2luLmVsLmFwcGVuZChodG1sKTtcclxuXHQgICAgICBwbHVnaW4udmlkZW9FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBsdWdpbi5zZXR0aW5ncy52aWRlb2lkKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwgPSAkKHBsdWdpbi52aWRlb0VsKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwuZmFkZUluKDApO1xyXG5cdCAgICAgIHNldFByb3BvcnRpb24oKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgc2V0UHJvcG9ydGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgcHJvcG9ydGlvbiA9IGdldFByb3BvcnRpb24oKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwud2lkdGgocHJvcG9ydGlvbipwbHVnaW4uc2V0dGluZ3Mud2lkdGgpO1xyXG5cdCAgICAgIHBsdWdpbi4kdmlkZW9FbC5oZWlnaHQocHJvcG9ydGlvbipwbHVnaW4uc2V0dGluZ3MuaGVpZ2h0KTtcclxuXHRcclxuXHQgICAgICBpZiAodHlwZW9mIHBsdWdpbi5zZXR0aW5ncy5hbGlnbiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHQgICAgICAgIGNlbnRlclZpZGVvKCk7XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBnZXRQcm9wb3J0aW9uID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG5cdCAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblx0ICAgICAgdmFyIHdpbmRvd1Byb3BvcnRpb24gPSB3aW5kb3dXaWR0aCAvIHdpbmRvd0hlaWdodDtcclxuXHQgICAgICB2YXIgb3JpZ1Byb3BvcnRpb24gPSBwbHVnaW4uc2V0dGluZ3Mud2lkdGggLyBwbHVnaW4uc2V0dGluZ3MuaGVpZ2h0O1xyXG5cdCAgICAgIHZhciBwcm9wb3J0aW9uID0gd2luZG93SGVpZ2h0IC8gcGx1Z2luLnNldHRpbmdzLmhlaWdodDtcclxuXHRcclxuXHQgICAgICBpZiAod2luZG93UHJvcG9ydGlvbiA+PSBvcmlnUHJvcG9ydGlvbikge1xyXG5cdCAgICAgICAgcHJvcG9ydGlvbiA9IHdpbmRvd1dpZHRoIC8gcGx1Z2luLnNldHRpbmdzLndpZHRoO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICByZXR1cm4gcHJvcG9ydGlvbjtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgY2VudGVyVmlkZW8gPSBmdW5jdGlvbigpIHtcclxuXHQgICAgICB2YXIgY2VudGVyWCA9ICgoJCh3aW5kb3cpLndpZHRoKCkgPj4gMSkgLSAocGx1Z2luLiR2aWRlb0VsLndpZHRoKCkgPj4gMSkpIHwgMDtcclxuXHQgICAgICB2YXIgY2VudGVyWSA9ICgoJCh3aW5kb3cpLmhlaWdodCgpID4+IDEpIC0gKHBsdWdpbi4kdmlkZW9FbC5oZWlnaHQoKSA+PiAxKSkgfCAwO1xyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYWxpZ24gPT0gJ2NlbnRlclhZJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcyh7ICdsZWZ0JzogY2VudGVyWCwgJ3RvcCc6IGNlbnRlclkgfSk7XHJcblx0ICAgICAgICByZXR1cm47XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYWxpZ24gPT0gJ2NlbnRlclgnKSB7XHJcblx0ICAgICAgICBwbHVnaW4uJHZpZGVvRWwuY3NzKCdsZWZ0JywgY2VudGVyWCk7XHJcblx0ICAgICAgICByZXR1cm47XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYWxpZ24gPT0gJ2NlbnRlclknKSB7XHJcblx0ICAgICAgICBwbHVnaW4uJHZpZGVvRWwuY3NzKCd0b3AnLCBjZW50ZXJZKTtcclxuXHQgICAgICAgIHJldHVybjtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgaW5pdCgpO1xyXG5cdFxyXG5cdCAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkgeyBzZXRQcm9wb3J0aW9uKCk7IH0pO1xyXG5cdCAgfVxyXG5cdH0pKCQpO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIFNldFBvaW50cyAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdC8qXHJcblx0KiDQnNCw0YHRiNGC0LDQsdC40YDRg9C10Lwg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC60L7QvdGC0LXQudC90LXRgCDRhNC+0L3QvtCy0L7Qs9C+INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0L/QvtC0INGE0LDQutGC0LjRh9C10YHQutC40LUg0YDQsNC30LzQtdGA0Ysg0YTQvtC90LBcclxuXHQqICQoZG9jdW1lbnQpLnNldFBvaW50cygnaW5pdCcpOyAvLyDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjRj1xyXG5cdCogJChkb2N1bWVudCkuc2V0UG9pbnRzKCdzZXRQcm9wb3J0aW9uJyk7IC8vINCy0YvQt9C+0LIg0LzQtdGC0L7QtNCwINC/0LXRgNC10YHRgtGA0L7QtdC90LjRjyDQuNC30L7QsdGA0LDQttC10L3QuNGPXHJcblx0KiDQktC+0L7QsdGJ0LUsINC10YHQu9C4INC/0YDQvtC/0L7RgNGG0LjQuCDQuNC30L7QsdGA0LDQttC10L3QuNGPINCy0YHQtdCz0LTQsCDQvtC00LjQvdCw0LrQvtCy0Ysg0Lgg0YHQvtGB0YLQsNCy0LvRj9GO0YIg0Log0L/RgNC40LzQtdGA0YMgMTY6OSwg0YLQviDQvNC+0LbQvdC+INC6IC5zZXQtcG9pbnRzINC00L7QsdCw0LLQuNGC0YwgXCJwYWRkaW5nLWJvdHRvbTogNTYuMjUlO1wiINC4INGB0LrRgNC40L/RgiDQvdC10L/QvtC90LDQtNC+0LHQuNGC0YHRj1xyXG5cdCog0J3QviDQsiDQvdCw0YjQtdC8INGB0LvRg9GH0LDQtSDQv9GA0L7Qv9C+0YDRhtC40Lgg0LjQt9C+0LHRgNCw0LbQtdC90LjQuSDQvNC+0LPRg9GCINCx0YvRgtGMINC70Y7QsdGL0LzQuCDQuCDQt9Cw0YDQsNC90LXQtSDQvdC10LjQt9Cy0LXRgdGC0L3Riywg0L/QvtGN0YLQvtC80YMg0LfQtNC10YHRjCDRgtC+0LvRjNC60L4g0YHQutGA0LjQv9GC0L7QvFxyXG5cdCovXHJcblx0KGZ1bmN0aW9uKCQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIG1ldGhvZHMgPSB7XHJcblx0XHRcdGluaXQgOiBmdW5jdGlvbigpIHsgXHJcblx0XHRcdFx0JCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsgJChkb2N1bWVudCkuc2V0UG9pbnRzKCdzZXRQcm9wb3J0aW9uJyk7IH0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRzZXRQcm9wb3J0aW9uIDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCQoJy5tYXBzLmFjdGl2ZSAucmVzcG9uc2l2ZS1pbWFnZScpLmxlbmd0aCAmJiAkKCcubWFwcy5hY3RpdmUgLnNldC1wb2ludHMnKS5sZW5ndGgpIHsgLy8g0LXRgdC70Lgg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC90L7QstCw0Y8g0LzQvtC00LXQu9GMINC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjyDQuNC30L7QsdGA0LDQttC10L3QuNC5INC4INC10YHRgtGMINGC0L7Rh9C60LgsINC30L3QsNGH0LjRgiDQvdGD0LbQvdC+INGE0LjQutGB0LjRgtGMXHJcblx0XHRcdFx0XHR2YXIgaW1nU3JjID0gJCgnLm1hcHMuYWN0aXZlIC5yZXNwb25zaXZlLWltYWdlJykuY3NzKCdiYWNrZ3JvdW5kSW1hZ2UnKS5yZXBsYWNlKC91cmxcXChcInxcIlxcKS9pZywnJyk7XHJcblx0XHRcdFx0XHR2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcblx0XHRcdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHZhciB3aWR0aEltZyA9IGltZy53aWR0aDtcclxuXHRcdFx0XHRcdFx0dmFyIGhlaWdodEltZyA9IGltZy5oZWlnaHQ7XHJcblx0XHRcdFx0XHRcdHZhciBjb250YWluZXJTZXQgPSAkKCcubWFwcy5hY3RpdmUgLnNldC1wb2ludHMnKS5nZXQoKTtcclxuXHRcdFx0XHRcdFx0dmFyIGNvbnRhaW5lciA9ICQoJy5tYXBzLmFjdGl2ZSAucmVzcG9uc2l2ZS1pbWFnZScpLmdldCgpO1xyXG5cdFx0XHRcdFx0XHR2YXIgd2lkdGhDb250YWluZXIgPSAkKGNvbnRhaW5lcikud2lkdGgoKTtcclxuXHRcdFx0XHRcdFx0dmFyIGhlaWdodENvbnRhaW5lciA9ICQoY29udGFpbmVyKS5oZWlnaHQoKTtcclxuXHRcdFx0XHRcdFx0dmFyIGFzcGVjdHJhdGlvSW1hZ2UgPSB3aWR0aEltZy9oZWlnaHRJbWc7XHJcblx0XHRcdFx0XHRcdHZhciBhc3BlY3RyYXRpb0NvbnRhaW5lciA9IHdpZHRoQ29udGFpbmVyL2hlaWdodENvbnRhaW5lcjtcclxuXHRcdFx0XHRcdFx0aWYgKGFzcGVjdHJhdGlvQ29udGFpbmVyID4gYXNwZWN0cmF0aW9JbWFnZSkgeyAvLyDQvdC10YXQstCw0YLQutCwINCy0YvRgdC+0YLRi1xyXG5cdFx0XHRcdFx0XHRcdHZhciByZXN1bHRIZWlnaHQgPSBwYXJzZUludCgoaGVpZ2h0SW1nICogd2lkdGhDb250YWluZXIpL3dpZHRoSW1nKTtcclxuXHRcdFx0XHRcdFx0XHQkKGNvbnRhaW5lclNldCkuaGVpZ2h0KHJlc3VsdEhlaWdodCkud2lkdGgoJzEwMCUnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiAoYXNwZWN0cmF0aW9Db250YWluZXIgPCBhc3BlY3RyYXRpb0ltYWdlKSB7ICAvLyDQvdC10YXQstCw0YLQutCwINGI0LjRgNC40L3Ri1xyXG5cdFx0XHRcdFx0XHRcdHZhciByZXN1bHRXaWR0aCA9IHBhcnNlSW50KCh3aWR0aEltZyAqIGhlaWdodENvbnRhaW5lcikvaGVpZ2h0SW1nKTtcclxuXHRcdFx0XHRcdFx0XHQkKGNvbnRhaW5lclNldCkud2lkdGgocmVzdWx0V2lkdGgpLmhlaWdodCgnMTAwJScpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpbWcuc3JjID0gaW1nU3JjO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0JC5mbi5zZXRQb2ludHMgPSBmdW5jdGlvbihtZXRob2QpIHtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChtZXRob2RzW21ldGhvZF0pIHtcclxuXHRcdFx0XHRyZXR1cm4gbWV0aG9kc1sgbWV0aG9kIF0uYXBwbHkoIHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICEgbWV0aG9kICkge1xyXG5cdFx0XHRcdHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQuZXJyb3IoICfQnNC10YLQvtC0INGBINC40LzQtdC90LXQvCAnICsgIG1ldGhvZCArICcg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRgiDQsiBzZXRQb2ludHMnICk7XHJcblx0XHRcdH0gXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdCQoZG9jdW1lbnQpLnNldFBvaW50cygnaW5pdCcpO1xyXG5cdFx0XHJcblx0fSkoJCk7XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
