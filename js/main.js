require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery.min",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,t,a,r){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a,"==":e==a}[t]}),Handlebars.registerHelper("ifCond",function(e,t,a,r){switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"<":return a>e?r.fn(this):r.inverse(this);case"<=":return a>=e?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var t=$(e.target).closest("a").attr("href");switch(t){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/story":app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/antiq":app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/antiq":app.printVideo("antiq"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/story":app.printVideo("story"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#video/history":app.printVideo("history"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"#games/antiq":app.printMap("antiq"),app.printTestPages("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.printTestPages("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.printTestPages("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.trigger("Tests:Cleared"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"www.tretyakovgallery.ru":window.open("http://www.tretyakovgallery.ru/","_blank")}},initialize:function(){var e=this;this.on("Display:Load",function(t){e.render()})},route:function(e,t){this.link=e,t?(this.loadModules(t),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var t=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(a,r){_.extend(t,a),t.html=$(r),t.loadCss(e,"display"),t.trigger("Display:Load",e)})},loadModules:function(e){var t=this;e.forEach(function(a,r){require(["../../template/modules/"+a+"/"+a,"text!../../template/modules/"+a+"/"+a+".html"],function(s,o){t[a+"Html"]=$(o),_.extend(t,s),t.loadCss(a,"module"),e.length-1===r&&t.trigger("Module:Load",e)})})},loadCss:function(e,t){var a="display"===t?"displays":"modules",r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="../../template/"+a+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(r)},renderHandlebarsTemplate:function(e,t){var a=Handlebars.compile($(e).html());return a(t)}}),app=new App;var t=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),a=new t;a.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),a.on("route:gallery",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:games",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reader",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:video",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reset",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start({pushState:!1}),function(e){e.backgroundVideo=function(t,a){var r={videoid:"video_background",autoplay:!1,loop:!1,preload:!0},s=this;s.settings={};var o=function(){s.settings=e.extend({},r,a),s.el=t,i()},i=function(){var t="",a="",r="",o="",i=s.settings.preload,p=s.settings.autoplay,d=s.settings.loop;a=i?'preload="false"':"",r=p?'autoplay="false"':"",o=d?'loop="false"':"",t+='<video id="'+s.settings.videoid+'"'+a+r+o,s.settings.poster&&(t+=' poster="'+s.settings.poster+'" '),t+='style="display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:2;width:100%;height:100%;">';for(var c=0;c<s.settings.types.length;c++)t+='<source src="'+s.settings.path+s.settings.filename+"."+s.settings.types[c]+'" type="video/'+s.settings.types[c]+'" />';t+="</video>",s.el.append(t),s.videoEl=document.getElementById(s.settings.videoid),s.$videoEl=e(s.videoEl),s.$videoEl.fadeIn(0),n()},n=function(){var e=p();s.$videoEl.width(e*s.settings.width),s.$videoEl.height(e*s.settings.height),"undefined"!=typeof s.settings.align&&d()},p=function(){var t=e(window).width(),a=e(window).height(),r=t/a,o=s.settings.width/s.settings.height,i=a/s.settings.height;return r>=o&&(i=t/s.settings.width),i},d=function(){var t=(e(window).width()>>1)-(s.$videoEl.width()>>1)|0,a=(e(window).height()>>1)-(s.$videoEl.height()>>1)|0;return"centerXY"==s.settings.align?void s.$videoEl.css({left:t,top:a}):"centerX"==s.settings.align?void s.$videoEl.css("left",t):"centerY"==s.settings.align?void s.$videoEl.css("top",a):void 0};o(),e(window).resize(function(){n()})}}($),function(e){var t={init:function(){e(window).resize(function(){e(document).setPoints("setProportion")})},setProportion:function(){if(e(".maps.active .responsive-image").length&&e(".maps.active .set-points").length){var t=e(".maps.active .responsive-image").css("backgroundImage").replace(/url\("|"\)/gi,""),a=new Image;a.onload=function(){var t=a.width,r=a.height,s=e(".maps.active .set-points").get(),o=e(".maps.active .responsive-image").get(),i=e(o).width(),n=e(o).height(),p=t/r,d=i/n;if(d>p){var c=parseInt(r*i/t);e(s).height(c).width("100%")}if(p>d){var l=parseInt(t*n/r);e(s).width(l).height("100%")}},a.src=t}}};e.fn.setPoints=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Метод с именем "+a+" не существует в setPoints"):t.init.apply(this,arguments)},e(document).setPoints("init")}($)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInByaW50Qm9va1BhZ2VzIiwiYnJlYWRjcnVtYnNSZW5kZXIiLCJnb1RvcCIsInJlcGxhY2UiLCJwcmludFZpZGVvIiwiZ29Cb3R0b20iLCJwcmludE1hcCIsInByaW50VGVzdFBhZ2VzIiwiZ29CYWNrIiwidGVzdEJyZWFkY3J1bWJzUmVuZGVyIiwiZ29Gcm9udCIsImdldEFjdGl2ZVRhYiIsImF1ZGlvU3dpY3RjaGVyIiwiZGVhY3RpdmF0ZVF1ZXN0aW9uIiwiY2hlY2tJbWFnZVByb2dyZXNzIiwid2luZG93IiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwicm91dGUiLCJsaW5rIiwibW9kdWxlc0xpc3QiLCJsb2FkTW9kdWxlcyIsIm9mZiIsIm1vZHVsZXMiLCJsb2FkVGVtcGxhdGUiLCJjb25zb2xlIiwibG9nIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsImxlbmd0aCIsIm1kIiwicGFydFVwbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJyZWwiLCJocmVmIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsInJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZSIsInNlbGVjdG9yIiwiZGF0YSIsInRlbXBsYXRlIiwiY29tcGlsZSIsIkFwcFJvdXRlciIsIlJvdXRlciIsInJvdXRlcyIsImxlc3NvbnMiLCJnYW1lcy86dGVzdCIsImJvb2svOm5hbWUiLCJ2aWRlby86bmFtZSIsInJvdXRlciIsInNldFRpbWVvdXQiLCJzdGFydCIsInB1c2hTdGF0ZSIsImJhY2tncm91bmRWaWRlbyIsImRlZmF1bHRzIiwidmlkZW9pZCIsImF1dG9wbGF5IiwibG9vcCIsInByZWxvYWQiLCJwbHVnaW4iLCJzZXR0aW5ncyIsImluaXQiLCJidWlsZFZpZGVvIiwicHJlbG9hZFN0cmluZyIsImF1dG9wbGF5U3RyaW5nIiwibG9vcFN0cmluZyIsIl9wcmVsb2FkIiwiX2F1dG9wbGF5IiwiX2xvb3AiLCJwb3N0ZXIiLCJ0eXBlcyIsInBhdGgiLCJmaWxlbmFtZSIsImFwcGVuZCIsInZpZGVvRWwiLCJnZXRFbGVtZW50QnlJZCIsIiR2aWRlb0VsIiwiZmFkZUluIiwic2V0UHJvcG9ydGlvbiIsInByb3BvcnRpb24iLCJnZXRQcm9wb3J0aW9uIiwid2lkdGgiLCJoZWlnaHQiLCJhbGlnbiIsImNlbnRlclZpZGVvIiwid2luZG93V2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJ3aW5kb3dQcm9wb3J0aW9uIiwib3JpZ1Byb3BvcnRpb24iLCJjZW50ZXJYIiwiY2VudGVyWSIsImxlZnQiLCJ0b3AiLCJyZXNpemUiLCJtZXRob2RzIiwic2V0UG9pbnRzIiwiaW1nU3JjIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJ3aWR0aEltZyIsImhlaWdodEltZyIsImNvbnRhaW5lclNldCIsImdldCIsImNvbnRhaW5lciIsIndpZHRoQ29udGFpbmVyIiwiaGVpZ2h0Q29udGFpbmVyIiwiYXNwZWN0cmF0aW9JbWFnZSIsImFzcGVjdHJhdGlvQ29udGFpbmVyIiwicmVzdWx0SGVpZ2h0IiwicGFyc2VJbnQiLCJyZXN1bHRXaWR0aCIsInNyYyIsIm1ldGhvZCIsImFwcGx5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLFFBQ1BDLFFBQVMsU0FDVEMsT0FDQ0MsT0FBVSx5QkFDVkMsU0FBWSxvQkFDWkMsS0FBUSxZQUNSQyxXQUFjLHdCQUNkQyxXQUFjLHdCQUNkQyxTQUFZLGdDQUViQyxNQUNDTCxVQUNDTSxNQUFPLGFBQWMsYUFLeEIsSUFBSUMsS0FDSEMsVUFDRGIsVUFDQyxhQUNBLFNBQ0EsT0FDQSxXQUNBLGFBQ0EsWUFDRSxTQUFTUSxHQUNYSyxXQUFhTCxFQUViSyxXQUFXQyxlQUFlLE9BQVEsU0FBU0MsRUFBUUMsRUFBVUMsRUFBUUMsR0FJakUsTUFIQUgsR0FBU0ksV0FBV0osR0FDcEJFLEVBQVNFLFdBQVdGLElBR2hCRyxJQUFLTCxFQUFTRSxFQUNkSSxJQUFLTixFQUFTRSxFQUNkSyxJQUFLUCxFQUFTRSxFQUNkTSxJQUFLUixFQUFTRSxFQUNkTyxJQUFLVCxFQUFTRSxFQUNkUSxLQUFNVixHQUFVRSxHQUNsQkQsS0FFTkgsV0FBV0MsZUFBZSxTQUFVLFNBQVVZLEVBQUlWLEVBQVVXLEVBQUlULEdBRTVELE9BQVFGLEdBQ0osSUFBSyxLQUNELE1BQVFVLElBQU1DLEVBQU1ULEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzNELEtBQUssTUFDRCxNQUFRSCxLQUFPQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUM1RCxLQUFLLElBQ0QsTUFBYUYsR0FBTEQsRUFBV1IsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDMUQsS0FBSyxLQUNELE1BQWNGLElBQU5ELEVBQVlSLEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzNELEtBQUssSUFD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aUJqSSxFQUFFZ0ksR0FBV3ZCLFFBQzlCeUIsRUFBa0JsSSxFQUFFZ0ksR0FBV3RCLFNBQy9CeUIsRUFBbUJQLEVBQVNDLEVBQzVCTyxFQUF1QkgsRUFBZUMsQ0FDMUMsSUFBSUUsRUFBdUJELEVBQWtCLENBQzVDLEdBQUlFLEdBQWVDLFNBQVVULEVBQVlJLEVBQWdCTCxFQUN6RDVILEdBQUU4SCxHQUFjcEIsT0FBTzJCLEdBQWM1QixNQUFNLFFBRTVDLEdBQTJCMEIsRUFBdkJDLEVBQXlDLENBQzVDLEdBQUlHLEdBQWNELFNBQVVWLEVBQVdNLEVBQWlCTCxFQUN4RDdILEdBQUU4SCxHQUFjckIsTUFBTThCLEdBQWE3QixPQUFPLFVBRzVDZSxFQUFJZSxJQUFNaEIsSUFLYnhILEdBQUVSLEdBQUcrSCxVQUFZLFNBQVNrQixHQUV6QixNQUFJbkIsR0FBUW1CLEdBQ0puQixFQUFTbUIsR0FBU0MsTUFBT2pKLEtBQU1rSixNQUFNQyxVQUFVQyxNQUFNQyxLQUFNQyxVQUFXLElBQ2hELGdCQUFYTixJQUF5QkEsTUFHM0N6SSxHQUFFZ0osTUFBTyxrQkFBcUJQLEVBQVMsOEJBRmhDbkIsRUFBUWpDLEtBQUtxRCxNQUFPakosS0FBTXNKLFlBTW5DL0ksRUFBRXNELFVBQVVpRSxVQUFVLFNBRXBCdkgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUuY29uZmlnKHtcclxuXHRiYXNlVXJsOiAndmVuZG9yJyxcclxuXHRwYXRoczoge1xyXG5cdFx0J2pxdWVyeSc6ICdqcXVlcnkvZGlzdC9qcXVlcnkubWluJyxcclxuXHRcdCdiYWNrYm9uZSc6ICdiYWNrYm9uZS9iYWNrYm9uZScsXHJcblx0XHQndGV4dCc6ICd0ZXh0L3RleHQnLFxyXG5cdFx0J3VuZGVyc2NvcmUnOiAndW5kZXJzY29yZS91bmRlcnNjb3JlJyxcclxuXHRcdCdoYW5kbGViYXJzJzogJ2hhbmRsZWJhcnMvaGFuZGxlYmFycycsXHJcblx0XHQncGFyYWxsYXgnOiAncGFyYWxsYXgvZGVwbG95L3BhcmFsbGF4Lm1pbidcclxuXHR9LFxyXG5cdHNoaW06IHtcclxuXHRcdCdiYWNrYm9uZSc6IHtcclxuXHRcdFx0ZGVwczogWyd1bmRlcnNjb3JlJywgJ2pxdWVyeSddXHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbnZhciBhcHAsXHJcblx0SGFuZGxlYmFycztcclxucmVxdWlyZShbXHJcblx0J2hhbmRsZWJhcnMnLFxyXG5cdCdqcXVlcnknLFxyXG5cdCd0ZXh0JyxcclxuXHQnYmFja2JvbmUnLFxyXG5cdCd1bmRlcnNjb3JlJyxcclxuXHRcInBhcmFsbGF4XCJcclxuXSwgZnVuY3Rpb24oaGFuZGxlYmFycykge1xyXG5cdEhhbmRsZWJhcnMgPSBoYW5kbGViYXJzO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEhhbmRsZWJhcnMgSGVscGVycy0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcIm1hdGhcIiwgZnVuY3Rpb24obHZhbHVlLCBvcGVyYXRvciwgcnZhbHVlLCBvcHRpb25zKSB7XHJcblx0ICAgIGx2YWx1ZSA9IHBhcnNlRmxvYXQobHZhbHVlKTtcclxuXHQgICAgcnZhbHVlID0gcGFyc2VGbG9hdChydmFsdWUpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgIHJldHVybiB7XHJcblx0ICAgICAgICBcIitcIjogbHZhbHVlICsgcnZhbHVlLFxyXG5cdCAgICAgICAgXCItXCI6IGx2YWx1ZSAtIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiKlwiOiBsdmFsdWUgKiBydmFsdWUsXHJcblx0ICAgICAgICBcIi9cIjogbHZhbHVlIC8gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIlXCI6IGx2YWx1ZSAlIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiPT1cIjogbHZhbHVlID09IHJ2YWx1ZVxyXG5cdCAgICB9W29wZXJhdG9yXTtcclxuXHR9KTtcclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkNvbmQnLCBmdW5jdGlvbiAodjEsIG9wZXJhdG9yLCB2Miwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7XHJcblx0ICAgICAgICBjYXNlICc9PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA9PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPT09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPCc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnJiYnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgJiYgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJ3x8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIHx8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBkZWZhdWx0OlxyXG5cdCAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgIH1cclxuXHR9KTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBBcHAgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRBcHAgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblx0XHRlbDogJCgnI2FwcCcpLFxyXG5cdFx0ZXZlbnRzOiB7XHJcblx0ICAgIFwiY2xpY2sgYVwiOlwib3BlblwiXHJcblx0ICB9LFxyXG5cdCAgb3BlbjogZnVuY3Rpb24oZSl7XHJcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcclxuXHRcdFx0dmFyIHVybCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpLmF0dHIoXCJocmVmXCIpO1xyXG5cdFxyXG5cdFx0XHRzd2l0Y2ggKHVybCl7XHJcblx0XHRcdFx0Y2FzZSBcIiNsZXNzb25zXCI6XHJcblx0XHRcdFx0XHQkKFwiaHRtbCxib2R5XCIpLmNzcyhcIm92ZXJmbG93LXlcIixcImhpZGRlblwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb1RvcCgpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNib29rL3N0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3ZpZGVvL2FudGlxXCI6XHJcblx0XHRcdFx0ICAgIGFwcC5wcmludFZpZGVvKFwiYW50aXFcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdCAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50VmlkZW8oXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQmNC70LvRjtGB0YLRgNCw0YbQuNC4INC6INCx0LDRgdC90Y/QvFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50VmlkZW8oXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dhbWVzL2FudGlxXCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludFRlc3RQYWdlcyhcImFudGlxXCIpO1xyXG5cdFx0XHRcdCBcdGFwcC5nb0JhY2soKTtcclxuXHRcdCAgICAgXHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIixcImFudGlxXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwic3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRUZXN0UGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHQgICAgYXBwLmdvQmFjaygpO1xyXG5cdFx0ICAgICAgXHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0JHQsNGB0L3QuCDQmtGA0YvQu9C+0LLQsFwiLFwic3RvcnlcIik7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dhbWVzL2hpc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRUZXN0UGFnZXMoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdCAgICBhcHAuZ29CYWNrKCk7XHJcblx0XHQgICAgICBcdFx0YXBwLnRlc3RCcmVhZGNydW1ic1JlbmRlcihcItCY0LPRgNCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIsXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnb0Zyb250XCI6XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjcmVzZXRcIjpcclxuXHRcdFx0XHRcdGFwcC50cmlnZ2VyKCdUZXN0czpDbGVhcmVkJyk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNzb3VuZFwiOlxyXG5cdFx0XHRcdFx0YXBwLmF1ZGlvU3dpY3RjaGVyKCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Zyb21UZXN0VG9WaWRlb1wiOlxyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dldFJldmFyZC1hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLmRlYWN0aXZhdGVRdWVzdGlvbih0aGlzKTtcclxuXHRcdFx0XHRcdGFwcC5jaGVja0ltYWdlUHJvZ3Jlc3MoKTtcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQmNC70LvRjtGB0YLRgNCw0YbQuNC4INC6INCx0LDRgdC90Y/QvFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLWhpc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcInd3dy50cmV0eWFrb3ZnYWxsZXJ5LnJ1XCI6XHJcblx0XHRcdFx0XHR3aW5kb3cub3BlbignaHR0cDovL3d3dy50cmV0eWFrb3ZnYWxsZXJ5LnJ1LycsICdfYmxhbmsnKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0ICB9LFxyXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcclxuXHRcdFx0dGhpcy5vbignRGlzcGxheTpMb2FkJywgZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0XHRzZWxmLnJlbmRlcigpO1xyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ9Cg0LXQvdC00LXRgCDRjdC60YDQsNC90LAgXCInICsgZGlzcGxheU5hbWUgKyAnXCIg0LfQsNCy0LXRgNGI0LXQvScpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZygn0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC40LvQvtC20LXQvdC40Y8g0LfQsNCy0LXRgNGI0LXQvdCwJyk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cm91dGU6IGZ1bmN0aW9uKGxpbmssIG1vZHVsZXNMaXN0KXtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcItCX0LDQv9GD0YHQutCw0LXQvCBSb3V0ZSDQuiBcIiwgbGluaywgXCIgYyDQvNC+0LTRg9C70Y/QvNC4IFwiLG1vZHVsZXNMaXN0KVxyXG5cdFx0XHR0aGlzLmxpbmsgPSBsaW5rO1xyXG5cdFxyXG5cdFx0XHQvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0L/QvtC00LrQu9GO0YfQsNC10LzRi9GFINC80L7QtNGD0LvQtdC5LCDQtdGB0LvQuCDQuNGFINC90LXRgiDQt9Cw0LPRgNGD0LbQsNC10Lwg0YLQvtC70YzQutC+INGI0LDQsdC70L7QvVxyXG5cdFx0XHRpZiAoIW1vZHVsZXNMaXN0KXtcclxuXHRcdFx0XHR0aGlzLmxvYWRUZW1wbGF0ZShsaW5rKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyDQndCw0YjQu9C4INC80L7QtNGD0LvRjCwg0LjQu9C4INC80L7QtNGD0LvQuC4g0JfQsNC/0YPRgdC60LDQtdC8INC40YUg0LfQsNCz0YDRg9C30LrRgyDQsiDQutC+0L3RgtC10LrRgdGCINC/0YDQuNC70L7QttC10L3QuNGPLlxyXG5cdFx0XHRcdHRoaXMubG9hZE1vZHVsZXMobW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vINCc0L7QtNGD0LvRjCDQuNC70Lgg0LzQvtC00YPQu9C4INC30LDQs9GA0YPQttC10L3Riy4g0J3QsNGH0LjQvdCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINGI0LDQsdC70L7QvdCwLlxyXG5cdFx0XHRcdHRoaXMub2ZmKCdNb2R1bGU6TG9hZCcpLm9uKCdNb2R1bGU6TG9hZCcsIGZ1bmN0aW9uKG1vZHVsZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKHRoaXMubGluayk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQvNC+0LTRg9C70Y8o0LXQuSlcIicgKyBtb2R1bGVzICsgJ1wiINC30LDQstC10YDRiNC10L3QsCcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ9CX0LDQs9GA0YPQt9C60LAg0K3QutGA0LDQvdCwXCInICsgdGhpcy5saW5rICsgJ1wiINC90LDRh9Cw0LvQsNGB0YwnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRUZW1wbGF0ZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUsXHJcblx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUgKyAnLmh0bWwnLFxyXG5cdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ9Ct0LrRgNCw0L0gXCInICsgZGlzcGxheU5hbWUgKyAnXCIg0LfQsNCz0YDRg9C20LXQvScpO1xyXG5cdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRzZWxmLmh0bWwgPSAkKGh0bWwpO1xyXG5cdFx0XHRcdHNlbGYubG9hZENzcyhkaXNwbGF5TmFtZSwgJ2Rpc3BsYXknKTtcclxuXHRcdFx0XHRzZWxmLnRyaWdnZXIoJ0Rpc3BsYXk6TG9hZCcsIGRpc3BsYXlOYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0bG9hZE1vZHVsZXM6IGZ1bmN0aW9uKG1vZHVsZXNMaXN0KSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0Ly/Ql9Cw0LPRgNGD0LbQsNC10Lwg0LzQvtC00YPQu9C4LlxyXG5cdFx0XHRtb2R1bGVzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG1vZHVsZSwgaSl7XHJcblx0XHRcdFx0Ly8gaWYgKCFfLmluY2x1ZGUoc2VsZi5sb2FkZWRNb2R1bGVzLCBtb2R1bGUpKSB7XHJcblx0XHRcdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHRcdFx0Jy4uLy4uL3RlbXBsYXRlL21vZHVsZXMvJyArIG1vZHVsZSArICcvJyArIG1vZHVsZSAsXHJcblx0XHRcdFx0XHRcdCd0ZXh0IS4uLy4uL3RlbXBsYXRlL21vZHVsZXMvJyArIG1vZHVsZSArICcvJyArIG1vZHVsZSArICcuaHRtbCdcclxuXHRcdFx0XHRcdF0sIGZ1bmN0aW9uKGpzLCBodG1sKSB7XHJcblx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coJ9Cc0L7QtNGD0LvRjCBcIicgKyBtb2R1bGUgKyAnXCIg0LfQsNCz0YDRg9C20LXQvScpO1xyXG5cdFx0XHRcdFx0XHRzZWxmW21vZHVsZSArICdIdG1sJ10gPSAkKGh0bWwpO1xyXG5cdFx0XHRcdFx0XHRfLmV4dGVuZChzZWxmLCBqcyk7XHJcblx0XHRcdFx0XHRcdHNlbGYubG9hZENzcyhtb2R1bGUsICdtb2R1bGUnKTtcclxuXHRcdFx0XHRcdFx0aWYoKG1vZHVsZXNMaXN0Lmxlbmd0aCAtIDEpID09PSBpKXtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLnRyaWdnZXIoJ01vZHVsZTpMb2FkJywgbW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHQvLyB9ZWxzZSBpZiAobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSA9PSBpKXtcclxuXHRcdFx0XHQvLyBcdGNvbnNvbGUubG9nKCdtb2R1bGVzTGlzdC5sZW5ndGgnLCBtb2R1bGVzTGlzdC5sZW5ndGgpXHJcblx0XHRcdFx0Ly8gXHRzZWxmLnRyaWdnZXIoJ01vZHVsZTpMb2FkJywgbW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vIH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0bG9hZENzczogZnVuY3Rpb24obW9kdWxlLCBtZCkge1xyXG5cdFx0XHR2YXIgcGFydFVwbCA9IG1kID09PSAnZGlzcGxheScgPyAnZGlzcGxheXMnIDogJ21vZHVsZXMnO1xyXG5cdFx0XHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG5cdFx0XHRsaW5rLnR5cGUgPSBcInRleHQvY3NzXCI7XHJcblx0XHRcdGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcblx0XHRcdGxpbmsuaHJlZiA9ICcuLi8uLi90ZW1wbGF0ZS8nICsgcGFydFVwbCArICcvJyArIG1vZHVsZSArICcvJyArIG1vZHVsZSArICcuY3NzJztcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGxpbmspO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdHJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZTogZnVuY3Rpb24oc2VsZWN0b3IsZGF0YSkge1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCfQodC+0LfQtNCw0LXQvCDRiNCw0LHQu9C+0L0gSGFuZGxlYmFycycsIHNlbGVjdG9yLCBkYXRhKTtcclxuXHRcclxuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKCQoc2VsZWN0b3IpLmh0bWwoKSk7XHJcblx0XHRcdHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRhcHAgPSBuZXcgQXBwKCk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gUm91dGVyIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0dmFyIEFwcFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xyXG5cdCAgICByb3V0ZXM6IHtcclxuXHQgICAgICAgIFwiXCI6IFwiZGVmYXVsdFJvdXRlXCIsXHJcblx0ICAgICAgICBcImxlc3NvbnNcIjpcImdhbGxlcnlcIixcclxuXHQgICAgICAgIFwiZ2FtZXMvOnRlc3RcIjpcImdhbWVzXCIsXHJcblx0ICAgICAgICBcImJvb2svOm5hbWVcIjpcInJlYWRlclwiLFxyXG5cdCAgICAgICAgXCJ2aWRlby86bmFtZVwiOlwidmlkZW9cIlxyXG5cdCAgICAgICAgLy8gbWF0Y2hlcyBodHRwOi8vZXhhbXBsZS5jb20vI2FueXRoaW5nLWhlcmVcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8vIEluaXRpYXRlIHRoZSByb3V0ZXJcclxuXHR2YXIgcm91dGVyID0gbmV3IEFwcFJvdXRlcjtcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmRlZmF1bHRSb3V0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ21haW5TY3JlZW4nLCBbJ3ByZWxvYWRlciddKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FsbGVyeScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FtZXMnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOnJlYWRlcicsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6dmlkZW8nLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOnJlc2V0JywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0Ly8gU3RhcnQgQmFja2JvbmUgaGlzdG9yeSBhIG5lY2Vzc2FyeSBzdGVwIGZvciBib29rbWFya2FibGUgVVJMJ3NcclxuXHRCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KHtwdXNoU3RhdGUgOiBmYWxzZX0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIFJvdXRlciAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdC8qXHJcblx0KiBqUXVlcnkgQmFja2dyb3VuZCB2aWRlbyBwbHVnaW4gZm9yIGpRdWVyeVxyXG5cdCogLS0tXHJcblx0KiBDb3B5cmlnaHQgMjAxMSwgVmljdG9yIENvdWxvbiAoaHR0cDovL3ZpY3RvcmNvdWxvbi5mcilcclxuXHQqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQsIEJTRCwgYW5kIEdQTCBMaWNlbnNlcy5cclxuXHQqIGJhc2VkIG9uIGpRdWVyeSBQbHVnaW4gQm9pbGVycGxhdGUgMS4zXHJcblx0Ki9cclxuXHQoZnVuY3Rpb24oJCkge1xyXG5cdFxyXG5cdCAgJC5iYWNrZ3JvdW5kVmlkZW8gPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICB2YXIgZGVmYXVsdHMgPSB7XHJcblx0ICAgICAgdmlkZW9pZDogXCJ2aWRlb19iYWNrZ3JvdW5kXCIsXHJcblx0ICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG5cdCAgICAgIGxvb3A6IGZhbHNlLFxyXG5cdCAgICAgIHByZWxvYWQ6IHRydWVcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgcGx1Z2luID0gdGhpcztcclxuXHRcclxuXHQgICAgcGx1Z2luLnNldHRpbmdzID0ge31cclxuXHRcclxuXHQgICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuXHQgICAgICBwbHVnaW4uc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cdCAgICAgIHBsdWdpbi5lbCA9IGVsO1xyXG5cdFxyXG5cdCAgICAgIGJ1aWxkVmlkZW8oKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgYnVpbGRWaWRlbyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgaHRtbCA9ICcnLFxyXG5cdCAgICAgICAgICBwcmVsb2FkU3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGF1dG9wbGF5U3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGxvb3BTdHJpbmcgPSAnJyxcclxuXHQgICAgICAgICAgX3ByZWxvYWQgPSBwbHVnaW4uc2V0dGluZ3MucHJlbG9hZCxcclxuXHQgICAgICAgICAgX2F1dG9wbGF5ID0gcGx1Z2luLnNldHRpbmdzLmF1dG9wbGF5LFxyXG5cdCAgICAgICAgICBfbG9vcCA9IHBsdWdpbi5zZXR0aW5ncy5sb29wO1xyXG5cdFxyXG5cdCAgICAgIGlmIChfcHJlbG9hZCkge1xyXG5cdCAgICAgICAgcHJlbG9hZFN0cmluZyA9ICdwcmVsb2FkPVwiZmFsc2VcIic7XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIHByZWxvYWRTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9hdXRvcGxheSkge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnYXV0b3BsYXk9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9sb29wKSB7XHJcblx0ICAgICAgICBsb29wU3RyaW5nID0gJ2xvb3A9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgbG9vcFN0cmluZyA9ICcnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBodG1sICs9ICc8dmlkZW8gaWQ9XCInK3BsdWdpbi5zZXR0aW5ncy52aWRlb2lkKydcIicgKyBwcmVsb2FkU3RyaW5nICsgYXV0b3BsYXlTdHJpbmcgKyBsb29wU3RyaW5nO1xyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MucG9zdGVyKSB7XHJcblx0ICAgICAgICBodG1sICs9ICcgcG9zdGVyPVwiJyArIHBsdWdpbi5zZXR0aW5ncy5wb3N0ZXIgKyAnXCIgJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaHRtbCArPSAnc3R5bGU9XCJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjA7ei1pbmRleDoyO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7XCI+JztcclxuXHQgICAgICBmb3IodmFyIGk9MDsgaSA8IHBsdWdpbi5zZXR0aW5ncy50eXBlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgaHRtbCArPSAnPHNvdXJjZSBzcmM9XCInK3BsdWdpbi5zZXR0aW5ncy5wYXRoK3BsdWdpbi5zZXR0aW5ncy5maWxlbmFtZSsnLicrcGx1Z2luLnNldHRpbmdzLnR5cGVzW2ldKydcIiB0eXBlPVwidmlkZW8vJytwbHVnaW4uc2V0dGluZ3MudHlwZXNbaV0rJ1wiIC8+JztcclxuXHQgICAgICB9XHJcblx0ICAgICAgaHRtbCArPSAnPC92aWRlbz4nO1xyXG5cdCAgICAgIHBsdWdpbi5lbC5hcHBlbmQoaHRtbCk7XHJcblx0ICAgICAgcGx1Z2luLnZpZGVvRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwbHVnaW4uc2V0dGluZ3MudmlkZW9pZCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsID0gJChwbHVnaW4udmlkZW9FbCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLmZhZGVJbigwKTtcclxuXHQgICAgICBzZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIHNldFByb3BvcnRpb24gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmFyIHByb3BvcnRpb24gPSBnZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLndpZHRoKHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLndpZHRoKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLmhlaWdodCk7XHJcblx0XHJcblx0ICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uc2V0dGluZ3MuYWxpZ24gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0ICAgICAgICBjZW50ZXJWaWRlbygpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgZ2V0UHJvcG9ydGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuXHQgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cdCAgICAgIHZhciB3aW5kb3dQcm9wb3J0aW9uID0gd2luZG93V2lkdGggLyB3aW5kb3dIZWlnaHQ7XHJcblx0ICAgICAgdmFyIG9yaWdQcm9wb3J0aW9uID0gcGx1Z2luLnNldHRpbmdzLndpZHRoIC8gcGx1Z2luLnNldHRpbmdzLmhlaWdodDtcclxuXHQgICAgICB2YXIgcHJvcG9ydGlvbiA9IHdpbmRvd0hlaWdodCAvIHBsdWdpbi5zZXR0aW5ncy5oZWlnaHQ7XHJcblx0XHJcblx0ICAgICAgaWYgKHdpbmRvd1Byb3BvcnRpb24gPj0gb3JpZ1Byb3BvcnRpb24pIHtcclxuXHQgICAgICAgIHByb3BvcnRpb24gPSB3aW5kb3dXaWR0aCAvIHBsdWdpbi5zZXR0aW5ncy53aWR0aDtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgcmV0dXJuIHByb3BvcnRpb247XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGNlbnRlclZpZGVvID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgdmFyIGNlbnRlclggPSAoKCQod2luZG93KS53aWR0aCgpID4+IDEpIC0gKHBsdWdpbi4kdmlkZW9FbC53aWR0aCgpID4+IDEpKSB8IDA7XHJcblx0ICAgICAgdmFyIGNlbnRlclkgPSAoKCQod2luZG93KS5oZWlnaHQoKSA+PiAxKSAtIChwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KCkgPj4gMSkpIHwgMDtcclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYWScpIHtcclxuXHQgICAgICAgIHBsdWdpbi4kdmlkZW9FbC5jc3MoeyAnbGVmdCc6IGNlbnRlclgsICd0b3AnOiBjZW50ZXJZIH0pO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygnbGVmdCcsIGNlbnRlclgpO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJZJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygndG9wJywgY2VudGVyWSk7XHJcblx0ICAgICAgICByZXR1cm47XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGluaXQoKTtcclxuXHRcclxuXHQgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsgc2V0UHJvcG9ydGlvbigpOyB9KTtcclxuXHQgIH1cclxuXHR9KSgkKTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBTZXRQb2ludHMgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHQvKlxyXG5cdCog0JzQsNGB0YjRgtCw0LHQuNGA0YPQtdC8INGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQutC+0L3RgtC10LnQvdC10YAg0YTQvtC90L7QstC+0LPQviDQuNC30L7QsdGA0LDQttC10L3QuNGPINC/0L7QtCDRhNCw0LrRgtC40YfQtdGB0LrQuNC1INGA0LDQt9C80LXRgNGLINGE0L7QvdCwXHJcblx0KiAkKGRvY3VtZW50KS5zZXRQb2ludHMoJ2luaXQnKTsgLy8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y9cclxuXHQqICQoZG9jdW1lbnQpLnNldFBvaW50cygnc2V0UHJvcG9ydGlvbicpOyAvLyDQstGL0LfQvtCyINC80LXRgtC+0LTQsCDQv9C10YDQtdGB0YLRgNC+0LXQvdC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjRj1xyXG5cdCog0JLQvtC+0LHRidC1LCDQtdGB0LvQuCDQv9GA0L7Qv9C+0YDRhtC40Lgg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQstGB0LXQs9C00LAg0L7QtNC40L3QsNC60L7QstGLINC4INGB0L7RgdGC0LDQstC70Y/RjtGCINC6INC/0YDQuNC80LXRgNGDIDE2OjksINGC0L4g0LzQvtC20L3QviDQuiAuc2V0LXBvaW50cyDQtNC+0LHQsNCy0LjRgtGMIFwicGFkZGluZy1ib3R0b206IDU2LjI1JTtcIiDQuCDRgdC60YDQuNC/0YIg0L3QtdC/0L7QvdCw0LTQvtCx0LjRgtGB0Y9cclxuXHQqINCd0L4g0LIg0L3QsNGI0LXQvCDRgdC70YPRh9Cw0LUg0L/RgNC+0L/QvtGA0YbQuNC4INC40LfQvtCx0YDQsNC20LXQvdC40Lkg0LzQvtCz0YPRgiDQsdGL0YLRjCDQu9GO0LHRi9C80Lgg0Lgg0LfQsNGA0LDQvdC10LUg0L3QtdC40LfQstC10YHRgtC90YssINC/0L7RjdGC0L7QvNGDINC30LTQtdGB0Ywg0YLQvtC70YzQutC+INGB0LrRgNC40L/RgtC+0LxcclxuXHQqL1xyXG5cdChmdW5jdGlvbigkKSB7XHJcblx0XHRcclxuXHRcdHZhciBtZXRob2RzID0ge1xyXG5cdFx0XHRpbml0IDogZnVuY3Rpb24oKSB7IFxyXG5cdFx0XHRcdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7ICQoZG9jdW1lbnQpLnNldFBvaW50cygnc2V0UHJvcG9ydGlvbicpOyB9KTtcclxuXHRcdFx0fSxcclxuXHRcdFx0c2V0UHJvcG9ydGlvbiA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICgkKCcubWFwcy5hY3RpdmUgLnJlc3BvbnNpdmUtaW1hZ2UnKS5sZW5ndGggJiYgJCgnLm1hcHMuYWN0aXZlIC5zZXQtcG9pbnRzJykubGVuZ3RoKSB7IC8vINC10YHQu9C4INC40YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQvdC+0LLQsNGPINC80L7QtNC10LvRjCDQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjQuSDQuCDQtdGB0YLRjCDRgtC+0YfQutC4LCDQt9C90LDRh9C40YIg0L3Rg9C20L3QviDRhNC40LrRgdC40YLRjFxyXG5cdFx0XHRcdFx0dmFyIGltZ1NyYyA9ICQoJy5tYXBzLmFjdGl2ZSAucmVzcG9uc2l2ZS1pbWFnZScpLmNzcygnYmFja2dyb3VuZEltYWdlJykucmVwbGFjZSgvdXJsXFwoXCJ8XCJcXCkvaWcsJycpO1xyXG5cdFx0XHRcdFx0dmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0XHRcdFx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHR2YXIgd2lkdGhJbWcgPSBpbWcud2lkdGg7XHJcblx0XHRcdFx0XHRcdHZhciBoZWlnaHRJbWcgPSBpbWcuaGVpZ2h0O1xyXG5cdFx0XHRcdFx0XHR2YXIgY29udGFpbmVyU2V0ID0gJCgnLm1hcHMuYWN0aXZlIC5zZXQtcG9pbnRzJykuZ2V0KCk7XHJcblx0XHRcdFx0XHRcdHZhciBjb250YWluZXIgPSAkKCcubWFwcy5hY3RpdmUgLnJlc3BvbnNpdmUtaW1hZ2UnKS5nZXQoKTtcclxuXHRcdFx0XHRcdFx0dmFyIHdpZHRoQ29udGFpbmVyID0gJChjb250YWluZXIpLndpZHRoKCk7XHJcblx0XHRcdFx0XHRcdHZhciBoZWlnaHRDb250YWluZXIgPSAkKGNvbnRhaW5lcikuaGVpZ2h0KCk7XHJcblx0XHRcdFx0XHRcdHZhciBhc3BlY3RyYXRpb0ltYWdlID0gd2lkdGhJbWcvaGVpZ2h0SW1nO1xyXG5cdFx0XHRcdFx0XHR2YXIgYXNwZWN0cmF0aW9Db250YWluZXIgPSB3aWR0aENvbnRhaW5lci9oZWlnaHRDb250YWluZXI7XHJcblx0XHRcdFx0XHRcdGlmIChhc3BlY3RyYXRpb0NvbnRhaW5lciA+IGFzcGVjdHJhdGlvSW1hZ2UpIHsgLy8g0L3QtdGF0LLQsNGC0LrQsCDQstGL0YHQvtGC0YtcclxuXHRcdFx0XHRcdFx0XHR2YXIgcmVzdWx0SGVpZ2h0ID0gcGFyc2VJbnQoKGhlaWdodEltZyAqIHdpZHRoQ29udGFpbmVyKS93aWR0aEltZyk7XHJcblx0XHRcdFx0XHRcdFx0JChjb250YWluZXJTZXQpLmhlaWdodChyZXN1bHRIZWlnaHQpLndpZHRoKCcxMDAlJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYgKGFzcGVjdHJhdGlvQ29udGFpbmVyIDwgYXNwZWN0cmF0aW9JbWFnZSkgeyAgLy8g0L3QtdGF0LLQsNGC0LrQsCDRiNC40YDQuNC90YtcclxuXHRcdFx0XHRcdFx0XHR2YXIgcmVzdWx0V2lkdGggPSBwYXJzZUludCgod2lkdGhJbWcgKiBoZWlnaHRDb250YWluZXIpL2hlaWdodEltZyk7XHJcblx0XHRcdFx0XHRcdFx0JChjb250YWluZXJTZXQpLndpZHRoKHJlc3VsdFdpZHRoKS5oZWlnaHQoJzEwMCUnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aW1nLnNyYyA9IGltZ1NyYztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRcclxuXHRcdCQuZm4uc2V0UG9pbnRzID0gZnVuY3Rpb24obWV0aG9kKSB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAobWV0aG9kc1ttZXRob2RdKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1ldGhvZHNbIG1ldGhvZCBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgbWV0aG9kID09PSAnb2JqZWN0JyB8fCAhIG1ldGhvZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLmVycm9yKCAn0JzQtdGC0L7QtCDRgSDQuNC80LXQvdC10LwgJyArICBtZXRob2QgKyAnINC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIg0LIgc2V0UG9pbnRzJyApO1xyXG5cdFx0XHR9IFxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQkKGRvY3VtZW50KS5zZXRQb2ludHMoJ2luaXQnKTtcclxuXHRcdFxyXG5cdH0pKCQpO1xyXG5cdFxyXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
