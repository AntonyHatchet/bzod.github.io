require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery.min",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,t,a,r){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a,"==":e==a}[t]}),Handlebars.registerHelper("ifCond",function(e,t,a,r){switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"<":return a>e?r.fn(this):r.inverse(this);case"<=":return a>=e?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var t=$(e.target).closest("a").attr("href");switch(t){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/story":app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/antiq":app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/antiq":app.printVideo("antiq"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/story":app.printVideo("story"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#video/history":app.printVideo("history"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"#games/antiq":app.printMap("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.testCleared(),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"www.tretyakovgallery.ru":window.open("http://www.tretyakovgallery.ru/","_blank")}},initialize:function(){var e=this;this.on("Display:Load",function(t){e.render()})},route:function(e,t){this.link=e,t?(this.loadModules(t),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var t=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(a,r){_.extend(t,a),t.html=$(r),t.loadCss(e,"display"),t.trigger("Display:Load",e)})},loadModules:function(e){var t=this;e.forEach(function(a,r){require(["../../template/modules/"+a+"/"+a,"text!../../template/modules/"+a+"/"+a+".html"],function(o,s){t[a+"Html"]=$(s),_.extend(t,o),t.loadCss(a,"module"),e.length-1===r&&t.trigger("Module:Load",e)})})},loadCss:function(e,t){var a="display"===t?"displays":"modules",r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="../../template/"+a+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(r)},renderHandlebarsTemplate:function(e,t){var a=Handlebars.compile($(e).html());return a(t)}}),app=new App;var t=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),a=new t;a.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),a.on("route:gallery",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:games",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reader",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:video",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reset",function(){app.route("gallery",["preloader","accordion","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start({pushState:!1}),function(e){e.backgroundVideo=function(t,a){var r={videoid:"video_background",autoplay:!1,loop:!1,preload:!0},o=this;o.settings={};var s=function(){o.settings=e.extend({},r,a),o.el=t,i()},i=function(){var t="",a="",r="",s="",i=o.settings.preload,p=o.settings.autoplay,d=o.settings.loop;a=i?'preload="false"':"",r=p?'autoplay="false"':"",s=d?'loop="false"':"",t+='<video id="'+o.settings.videoid+'"'+a+r+s,o.settings.poster&&(t+=' poster="'+o.settings.poster+'" '),t+='style="display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:2;width:100%;height:100%;">';for(var c=0;c<o.settings.types.length;c++)t+='<source src="'+o.settings.path+o.settings.filename+"."+o.settings.types[c]+'" type="video/'+o.settings.types[c]+'" />';t+="</video>",o.el.append(t),o.videoEl=document.getElementById(o.settings.videoid),o.$videoEl=e(o.videoEl),o.$videoEl.fadeIn(0),n()},n=function(){var e=p();o.$videoEl.width(e*o.settings.width),o.$videoEl.height(e*o.settings.height),"undefined"!=typeof o.settings.align&&d()},p=function(){var t=e(window).width(),a=e(window).height(),r=t/a,s=o.settings.width/o.settings.height,i=a/o.settings.height;return r>=s&&(i=t/o.settings.width),i},d=function(){var t=(e(window).width()>>1)-(o.$videoEl.width()>>1)|0,a=(e(window).height()>>1)-(o.$videoEl.height()>>1)|0;return"centerXY"==o.settings.align?void o.$videoEl.css({left:t,top:a}):"centerX"==o.settings.align?void o.$videoEl.css("left",t):"centerY"==o.settings.align?void o.$videoEl.css("top",a):void 0};s(),e(window).resize(function(){n()})}}($),function(e){var t={init:function(){e(window).resize(function(){e(document).setPoints("setProportion")})},setProportion:function(){if(e(".maps.active .responsive-image").length&&e(".maps.active .set-points").length){var t=e(".maps.active .responsive-image").css("backgroundImage").replace(/url\("|"\)/gi,""),a=new Image;a.onload=function(){var t=a.width,r=a.height,o=e(".maps.active .set-points").get(),s=e(".maps.active .responsive-image").get(),i=e(s).width(),n=e(s).height(),p=t/r,d=i/n;if(d>p){var c=parseInt(r*i/t);e(o).height(c).width("100%")}if(p>d){var l=parseInt(t*n/r);e(o).width(l).height("100%")}},a.src=t}}};e.fn.setPoints=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Метод с именем "+a+" не существует в setPoints"):t.init.apply(this,arguments)},e(document).setPoints("init")}($)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInByaW50Qm9va1BhZ2VzIiwiYnJlYWRjcnVtYnNSZW5kZXIiLCJnb1RvcCIsInJlcGxhY2UiLCJwcmludFZpZGVvIiwiZ29Cb3R0b20iLCJwcmludE1hcCIsImdvQmFjayIsInRlc3RCcmVhZGNydW1ic1JlbmRlciIsImdvRnJvbnQiLCJnZXRBY3RpdmVUYWIiLCJ0ZXN0Q2xlYXJlZCIsImF1ZGlvU3dpY3RjaGVyIiwiZGVhY3RpdmF0ZVF1ZXN0aW9uIiwiY2hlY2tJbWFnZVByb2dyZXNzIiwid2luZG93IiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwicm91dGUiLCJsaW5rIiwibW9kdWxlc0xpc3QiLCJsb2FkTW9kdWxlcyIsIm9mZiIsIm1vZHVsZXMiLCJsb2FkVGVtcGxhdGUiLCJjb25zb2xlIiwibG9nIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsImxlbmd0aCIsIm1kIiwicGFydFVwbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJyZWwiLCJocmVmIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsInJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZSIsInNlbGVjdG9yIiwiZGF0YSIsInRlbXBsYXRlIiwiY29tcGlsZSIsIkFwcFJvdXRlciIsIlJvdXRlciIsInJvdXRlcyIsImxlc3NvbnMiLCJnYW1lcy86dGVzdCIsImJvb2svOm5hbWUiLCJ2aWRlby86bmFtZSIsInJvdXRlciIsInNldFRpbWVvdXQiLCJzdGFydCIsInB1c2hTdGF0ZSIsImJhY2tncm91bmRWaWRlbyIsImRlZmF1bHRzIiwidmlkZW9pZCIsImF1dG9wbGF5IiwibG9vcCIsInByZWxvYWQiLCJwbHVnaW4iLCJzZXR0aW5ncyIsImluaXQiLCJidWlsZFZpZGVvIiwicHJlbG9hZFN0cmluZyIsImF1dG9wbGF5U3RyaW5nIiwibG9vcFN0cmluZyIsIl9wcmVsb2FkIiwiX2F1dG9wbGF5IiwiX2xvb3AiLCJwb3N0ZXIiLCJ0eXBlcyIsInBhdGgiLCJmaWxlbmFtZSIsImFwcGVuZCIsInZpZGVvRWwiLCJnZXRFbGVtZW50QnlJZCIsIiR2aWRlb0VsIiwiZmFkZUluIiwic2V0UHJvcG9ydGlvbiIsInByb3BvcnRpb24iLCJnZXRQcm9wb3J0aW9uIiwid2lkdGgiLCJoZWlnaHQiLCJhbGlnbiIsImNlbnRlclZpZGVvIiwid2luZG93V2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJ3aW5kb3dQcm9wb3J0aW9uIiwib3JpZ1Byb3BvcnRpb24iLCJjZW50ZXJYIiwiY2VudGVyWSIsImxlZnQiLCJ0b3AiLCJyZXNpemUiLCJtZXRob2RzIiwic2V0UG9pbnRzIiwiaW1nU3JjIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJ3aWR0aEltZyIsImhlaWdodEltZyIsImNvbnRhaW5lclNldCIsImdldCIsImNvbnRhaW5lciIsIndpZHRoQ29udGFpbmVyIiwiaGVpZ2h0Q29udGFpbmVyIiwiYXNwZWN0cmF0aW9JbWFnZSIsImFzcGVjdHJhdGlvQ29udGFpbmVyIiwicmVzdWx0SGVpZ2h0IiwicGFyc2VJbnQiLCJyZXN1bHRXaWR0aCIsInNyYyIsIm1ldGhvZCIsImFwcGx5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLFFBQ1BDLFFBQVMsU0FDVEMsT0FDQ0MsT0FBVSx5QkFDVkMsU0FBWSxvQkFDWkMsS0FBUSxZQUNSQyxXQUFjLHdCQUNkQyxXQUFjLHdCQUNkQyxTQUFZLGdDQUViQyxNQUNDTCxVQUNDTSxNQUFPLGFBQWMsYUFLeEIsSUFBSUMsS0FDSEMsVUFDRGIsVUFDQyxhQUNBLFNBQ0EsT0FDQSxXQUNBLGFBQ0EsWUFDRSxTQUFTUSxHQUNYSyxXQUFhTCxFQUViSyxXQUFXQyxlQUFlLE9BQVEsU0FBU0MsRUFBUUMsRUFBVUMsRUFBUUMsR0FJakUsTUFIQUgsR0FBU0ksV0FBV0osR0FDcEJFLEVBQVNFLFdBQVdGLElBR2hCRyxJQUFLTCxFQUFTRSxFQUNkSSxJQUFLTixFQUFTRSxFQUNkSyxJQUFLUCxFQUFTRSxFQUNkTSxJQUFLUixFQUFTRSxFQUNkTyxJQUFLVCxFQUFTRSxFQUNkUSxLQUFNVixHQUFVRSxHQUNsQkQsS0FFTkgsV0FBV0MsZUFBZSxTQUFVLFNBQVVZLEVBQUlWLEVBQVVXLEVBQUlULEdBRTVELE9BQVFGLEdBQ0osSUFBSyxLQUNELE1BQVFVLElBQU1DLEVBQU1ULEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzNELEtBQUssTUFDRCxNQUFRSCxLQUFPQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUM1RCxLQUFLLElBQ0QsTUFBYUYsR0FBTEQsRUFBV1IsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDMUQsS0FBSyxLQUNELE1BQWNGLElBQU5ELEVBQVlSLEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzNELEtBQUssSUFDRCxNQUFRSCxHQUFLQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMxRCxLQUFLLEtBQ0QsTUFBUUgsSUFBTUMsRUFBTVQsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDM0QsS0FBSyxLQUNELE1BQVFILElBQU1DLEVBQU1ULEVBQVFVLEdBQUdDLE1BQVFYLEVBQVFZLFFBQVFELEtBQzNELEtBQUssS0FDRCxNQUFRSCxJQUFNQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMzRCxTQUNJLE1BQU9YLEdBQVFZLFFBQVFELFNBSW5DRSxJQUFNQyxTQUFTQyxLQUFLQyxRQUNuQkMsR0FBSUMsRUFBRSxRQUNOQyxRQUNHQyxVQUFVLFFBRVpDLEtBQU0sU0FBU0MsR0FDYkEsRUFBRUMsZ0JBRUosSUFBSUMsR0FBTU4sRUFBRUksRUFBRUcsUUFBUUMsUUFBUSxLQUFLQyxLQUFLLE9BRXhDLFFBQVFILEdBQ1AsSUFBSyxXQUNKTixFQUFFLGFBQWFVLElBQUksYUFBYSxVQUNoQ2QsU0FBU2UsUUFBUUMsU0FBUyxZQUFhQyxTQUFRLEdBQy9DLE1BRUQsS0FBSyxnQkFDSnJDLElBQUlzQyxlQUFlLFdBQ25CdEMsSUFBSXVDLGtCQUFrQix5QkFBeUIsNEJBQy9DdkMsSUFBSXdDLFFBQ0pwQixTQUFTZSxRQUFRQyxTQUFTTixHQUFNTyxTQUFRLEVBQU1JLFNBQVEsR0FDdEQsTUFFRCxLQUFLLGNBQ0p6QyxJQUFJc0MsZUFBZSxTQUNuQnRDLElBQUl1QyxrQkFBa0IseUJBQXlCLHdCQUMvQ3ZDLElBQUl3QyxRQUNKcEIsU0FBU2UsUUFBUUMsU0FBU04sR0FBTU8sU0FBUSxFQUFNSSxTQUFRLEdBQ3RELE1BRUQsS0FBSyxjQUNKekMsSUFBSXNDLGVBQWUsU0FDbkJ0QyxJQUFJdUMsa0JBQWtCLHlCQUF5QixtQkFDL0N2QyxJQUFJd0MsUUFDSnBCLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxHQUN0RCxNQUVELEtBQUssZUFDRHpDLElBQUkwQyxXQUFXLFNBQ2YxQyxJQUFJMkMsV0FDSjNDLElBQUl1QyxrQkFBa0IseUJBQXlCLG1CQUNsRG5CLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxHQUN0RCxNQUNELEtBQUssZUFDSnpDLElBQUkwQyxXQUFXLFNBQ2YxQyxJQUFJMkMsV0FDSjNDLElBQUl1QyxrQkFBa0IseUJBQXlCLHVCQUMvQyxNQUVELEtBQUssaUJBQ0p2QyxJQUFJMEMsV0FBVyxXQUNmMUMsSUFBSTJDLFdBQ0ozQyxJQUFJdUMsa0JBQWtCLHlCQUF5QiwyQkFDL0MsTUFFRCxLQUFLLGVBQ0p2QyxJQUFJNEMsU0FBUyxTQUVaNUMsSUFBSTZDLFNBQ0Q3QyxJQUFJOEMsc0JBQXNCLE9BQU8sa0JBQWtCLFNBQ3ZEMUIsU0FBU2UsUUFBUUMsU0FBU04sR0FBTU8sU0FBUSxFQUFNSSxTQUFRLEdBQ3RELE1BRUQsS0FBSyxlQUNKekMsSUFBSTRDLFNBQVMsU0FFVjVDLElBQUk2QyxTQUNGN0MsSUFBSThDLHNCQUFzQixPQUFPLGdCQUFnQixTQUN0RDFCLFNBQVNlLFFBQVFDLFNBQVNOLEdBQU1PLFNBQVEsRUFBTUksU0FBUSxHQUN0RCxNQUVELEtBQUssaUJBQ0p6QyxJQUFJNEMsU0FBUyxXQUVWNUMsSUFBSTZDLFNBQ0o3QyxJQUFJOEMsc0JBQXNCLE9BQU8sMkJBQTJCLFdBQy9EMUIsU0FBU2UsUUFBUUMsU0FBU04sR0FBTU8sU0FBUSxFQUFNSSxTQUFRLEdBQ3RELE1BRUQsS0FBSyxXQUNKekMsSUFBSStDLFVBQ0ovQyxJQUFJdUMsa0JBQWtCLHlCQUF5QnZDLElBQUlnRCxnQkFDbkQ1QixTQUFTZSxRQUFRQyxTQUFTLFlBQWFDLFNBQVEsRUFBTUksU0FBUSxHQUM3RCxNQUVELEtBQUssU0FDSnpDLElBQUlpRCxjQUNKN0IsU0FBU2UsUUFBUUMsU0FBUyxZQUFhQyxTQUFRLEdBQy9DLE1BRUQsS0FBSyxTQUNKckMsSUFBSWtELGdCQUNKLE1BRUQsS0FBSyxtQkFDSmxELElBQUkyQyxVQUNKLE1BRUQsS0FBSyxtQkFDSjNDLElBQUltRCxtQkFBbUJsQyxNQUN2QmpCLElBQUlvRCxxQkFDSnBELElBQUkrQyxVQUNKL0MsSUFBSXVDLGtCQUFrQix5QkFBeUIsa0JBQy9DLE1BRUQsS0FBSyxtQkFDSnZDLElBQUltRCxtQkFBbUJsQyxNQUN2QmpCLElBQUlvRCxxQkFDSnBELElBQUkrQyxVQUNKL0MsSUFBSXVDLGtCQUFrQix5QkFBeUIsdUJBQy9DLE1BRUQsS0FBSyxxQkFDSnZDLElBQUltRCxtQkFBbUJsQyxNQUN2QmpCLElBQUlvRCxxQkFDSnBELElBQUkrQyxVQUNKL0MsSUFBSXVDLGtCQUFrQix5QkFBeUIsMkJBQy9DLE1BQ0QsS0FBSywwQkFDSmMsT0FBTzFCLEtBQUssa0NBQW1DLFlBSWxEMkIsV0FBWSxXQUNYLEdBQUlDLEdBQU90QyxJQUVYQSxNQUFLdUMsR0FBRyxlQUFnQixTQUFTQyxHQUNoQ0YsRUFBS0csWUFNUEMsTUFBTyxTQUFTQyxFQUFNQyxHQUVyQjVDLEtBQUsyQyxLQUFPQSxFQUdQQyxHQUlKNUMsS0FBSzZDLFlBQVlELEdBRWpCNUMsS0FBSzhDLElBQUksZUFBZVAsR0FBRyxjQUFlLFNBQVNRLEdBQ2xEL0MsS0FBS2dELGFBQWFoRCxLQUFLMkMsTUFDdkJNLFFBQVFDLElBQUksdUJBQXlCSCxFQUFVLGVBQy9DRSxRQUFRQyxJQUFJLG1CQUFxQmxELEtBQUsyQyxLQUFPLGlCQVI5QzNDLEtBQUtnRCxhQUFhTCxJQWFwQkssYUFBYyxTQUFTUixHQUN0QixHQUFJRixHQUFPdEMsSUFDWDdCLFVBQ0MsMkJBQTZCcUUsRUFBYyxJQUFNQSxFQUNqRCxnQ0FBa0NBLEVBQWMsSUFBTUEsRUFBYyxTQUNsRSxTQUFTVyxFQUFJQyxHQUVmQyxFQUFFaEQsT0FBT2lDLEVBQU1hLEdBQ2ZiLEVBQUtjLEtBQU83QyxFQUFFNkMsR0FDZGQsRUFBS2dCLFFBQVFkLEVBQWEsV0FDMUJGLEVBQUtsQixRQUFRLGVBQWdCb0IsTUFJL0JLLFlBQWEsU0FBU0QsR0FDckIsR0FBSU4sR0FBT3RDLElBRVg0QyxHQUFZVyxRQUFRLFNBQVNDLEVBQVFDLEdBRW5DdEYsU0FDQywwQkFBNEJxRixFQUFTLElBQU1BLEVBQzNDLCtCQUFpQ0EsRUFBUyxJQUFNQSxFQUFTLFNBQ3ZELFNBQVNMLEVBQUlDLEdBRWZkLEVBQUtrQixFQUFTLFFBQVVqRCxFQUFFNkMsR0FDMUJDLEVBQUVoRCxPQUFPaUMsRUFBTWEsR0FDZmIsRUFBS2dCLFFBQVFFLEVBQVEsVUFDakJaLEVBQVljLE9BQVMsSUFBT0QsR0FDL0JuQixFQUFLbEIsUUFBUSxjQUFld0IsUUFVakNVLFFBQVMsU0FBU0UsRUFBUUcsR0FDekIsR0FBSUMsR0FBaUIsWUFBUEQsRUFBbUIsV0FBYSxVQUMxQ2hCLEVBQU9rQixTQUFTQyxjQUFjLE9BQ2xDbkIsR0FBS29CLEtBQU8sV0FDWnBCLEVBQUtxQixJQUFNLGFBQ1hyQixFQUFLc0IsS0FBTyxrQkFBb0JMLEVBQVUsSUFBTUosRUFBUyxJQUFNQSxFQUFTLE9BQ3hFSyxTQUFTSyxxQkFBcUIsUUFBUSxHQUFHQyxZQUFZeEIsSUFHdER5Qix5QkFBMEIsU0FBU0MsRUFBU0MsR0FHM0MsR0FBSUMsR0FBV3ZGLFdBQVd3RixRQUFRakUsRUFBRThELEdBQVVqQixPQUM5QyxPQUFPbUIsR0FBU0QsTUFHbEJ2RixJQUFNLEdBQUltQixJQUVWLElBQUl1RSxHQUFZdEUsU0FBU3VFLE9BQU9yRSxRQUM1QnNFLFFBQ0ksR0FBSSxlQUNKQyxRQUFVLFVBQ1ZDLGNBQWMsUUFDZEMsYUFBYSxTQUNiQyxjQUFjLFdBS2xCQyxFQUFTLEdBQUlQLEVBRWpCTyxHQUFPekMsR0FBRyxxQkFBc0IsV0FDNUJ4RCxJQUFJMkQsTUFBTSxjQUFlLGdCQUc3QnNDLEVBQU96QyxHQUFHLGdCQUFpQixXQUN2QnhELElBQUkyRCxNQUFNLFdBQVksWUFBWSxZQUFhLFdBQVcsU0FBVSxnQkFBZ0IsT0FBTyxRQUFRLFFBQVEsVUFFM0d1QyxXQUFXLFdBQ1RsRyxJQUFJdUMsa0JBQWtCLHlCQUF5QnZDLElBQUlnRCxpQkFDbkQsT0FHTmlELEVBQU96QyxHQUFHLGNBQWUsV0FDckJ4RCxJQUFJMkQsTUFBTSxXQUFZLFlBQVksWUFBYSxXQUFXLFNBQVUsZ0JBQWdCLE9BQU8sUUFBUSxRQUFRLFVBRTNHdUMsV0FBVyxXQUNUbEcsSUFBSXVDLGtCQUFrQix5QkFBeUJ2QyxJQUFJZ0QsaUJBQ25ELE9BR05pRCxFQUFPekMsR0FBRyxlQUFnQixXQUN0QnhELElBQUkyRCxNQUFNLFdBQVksWUFBWSxZQUFhLFdBQVcsU0FBVSxnQkFBZ0IsT0FBTyxRQUFRLFFBQVEsVUFFM0d1QyxXQUFXLFdBQ1RsRyxJQUFJdUMsa0JBQWtCLHlCQUF5QnZDLElBQUlnRCxpQkFDbkQsT0FHTmlELEVBQU96QyxHQUFHLGNBQWUsV0FDckJ4RCxJQUFJMkQsTUFBTSxXQUFZLFlBQVksWUFBYSxXQUFXLFNBQVUsZ0JBQWdCLE9BQU8sUUFBUSxRQUFRLFVBRTNHdUMsV0FBVyxXQUNUbEcsSUFBSXVDLGtCQUFrQix5QkFBeUJ2QyxJQUFJZ0QsaUJBQ25ELE9BR05pRCxFQUFPekMsR0FBRyxjQUFlLFdBQ3JCeEQsSUFBSTJELE1BQU0sV0FBWSxZQUFZLFlBQWEsV0FBVyxTQUFVLGdCQUFnQixPQUFPLFFBQVEsUUFBUSxVQUUzR3VDLFdBQVcsV0FDVGxHLElBQUl1QyxrQkFBa0IseUJBQXlCdkMsSUFBSWdELGlCQUNuRCxPQUlONUIsU0FBU2UsUUFBUWdFLE9BQU9DLFdBQVksSUFTcEMsU0FBVTVFLEdBRVJBLEVBQUU2RSxnQkFBa0IsU0FBUzlFLEVBQUlqQixHQUUvQixHQUFJZ0csSUFDRkMsUUFBUyxtQkFDVEMsVUFBVSxFQUNWQyxNQUFNLEVBQ05DLFNBQVMsR0FHUEMsRUFBUzFGLElBRWIwRixHQUFPQyxXQUVQLElBQUlDLEdBQU8sV0FDVEYsRUFBT0MsU0FBV3BGLEVBQUVGLFVBQVdnRixFQUFVaEcsR0FDekNxRyxFQUFPcEYsR0FBS0EsRUFFWnVGLEtBR0VBLEVBQWEsV0FDZixHQUFJekMsR0FBTyxHQUNQMEMsRUFBZ0IsR0FDaEJDLEVBQWlCLEdBQ2pCQyxFQUFhLEdBQ2JDLEVBQVdQLEVBQU9DLFNBQVNGLFFBQzNCUyxFQUFZUixFQUFPQyxTQUFTSixTQUM1QlksRUFBUVQsRUFBT0MsU0FBU0gsSUFHMUJNLEdBREVHLEVBQ2Msa0JBRUEsR0FJaEJGLEVBREVHLEVBQ2UsbUJBRUEsR0FJakJGLEVBREVHLEVBQ1csZUFFQSxHQUdmL0MsR0FBUSxjQUFjc0MsRUFBT0MsU0FBU0wsUUFBUSxJQUFNUSxFQUFnQkMsRUFBaUJDLEVBRWpGTixFQUFPQyxTQUFTUyxTQUNsQmhELEdBQVEsWUFBY3NDLEVBQU9DLFNBQVNTLE9BQVMsTUFHakRoRCxHQUFRLHNHQUNSLEtBQUksR0FBSUssR0FBRSxFQUFHQSxFQUFJaUMsRUFBT0MsU0FBU1UsTUFBTTNDLE9BQVFELElBQzdDTCxHQUFRLGdCQUFnQnNDLEVBQU9DLFNBQVNXLEtBQUtaLEVBQU9DLFNBQVNZLFNBQVMsSUFBSWIsRUFBT0MsU0FBU1UsTUFBTTVDLEdBQUcsaUJBQWlCaUMsRUFBT0MsU0FBU1UsTUFBTTVDLEdBQUcsTUFFL0lMLElBQVEsV0FDUnNDLEVBQU9wRixHQUFHa0csT0FBT3BELEdBQ2pCc0MsRUFBT2UsUUFBVTVDLFNBQVM2QyxlQUFlaEIsRUFBT0MsU0FBU0wsU0FDekRJLEVBQU9pQixTQUFXcEcsRUFBRW1GLEVBQU9lLFNBQzNCZixFQUFPaUIsU0FBU0MsT0FBTyxHQUN2QkMsS0FHRUEsRUFBZ0IsV0FDbEIsR0FBSUMsR0FBYUMsR0FDakJyQixHQUFPaUIsU0FBU0ssTUFBTUYsRUFBV3BCLEVBQU9DLFNBQVNxQixPQUNqRHRCLEVBQU9pQixTQUFTTSxPQUFPSCxFQUFXcEIsRUFBT0MsU0FBU3NCLFFBRWIsbUJBQTFCdkIsR0FBT0MsU0FBU3VCLE9BQ3pCQyxLQUlBSixFQUFnQixXQUNsQixHQUFJSyxHQUFjN0csRUFBRTZCLFFBQVE0RSxRQUN4QkssRUFBZTlHLEVBQUU2QixRQUFRNkUsU0FDekJLLEVBQW1CRixFQUFjQyxFQUNqQ0UsRUFBaUI3QixFQUFPQyxTQUFTcUIsTUFBUXRCLEVBQU9DLFNBQVNzQixPQUN6REgsRUFBYU8sRUFBZTNCLEVBQU9DLFNBQVNzQixNQU1oRCxPQUpJSyxJQUFvQkMsSUFDdEJULEVBQWFNLEVBQWMxQixFQUFPQyxTQUFTcUIsT0FHdENGLEdBR0xLLEVBQWMsV0FDaEIsR0FBSUssSUFBWWpILEVBQUU2QixRQUFRNEUsU0FBVyxJQUFNdEIsRUFBT2lCLFNBQVNLLFNBQVcsR0FBTSxFQUN4RVMsR0FBWWxILEVBQUU2QixRQUFRNkUsVUFBWSxJQUFNdkIsRUFBT2lCLFNBQVNNLFVBQVksR0FBTSxDQUU5RSxPQUE2QixZQUF6QnZCLEVBQU9DLFNBQVN1QixVQUNsQnhCLEdBQU9pQixTQUFTMUYsS0FBTXlHLEtBQVFGLEVBQVNHLElBQU9GLElBSW5CLFdBQXpCL0IsRUFBT0MsU0FBU3VCLFVBQ2xCeEIsR0FBT2lCLFNBQVMxRixJQUFJLE9BQVF1RyxHQUlELFdBQXpCOUIsRUFBT0MsU0FBU3VCLFVBQ2xCeEIsR0FBT2lCLFNBQVMxRixJQUFJLE1BQU93RyxHQUQ3QixPQU1GN0IsS0FFQXJGLEVBQUU2QixRQUFRd0YsT0FBTyxXQUFhZixRQUUvQnRHLEdBU0gsU0FBVUEsR0FFVCxHQUFJc0gsSUFDSGpDLEtBQU8sV0FDTnJGLEVBQUU2QixRQUFRd0YsT0FBTyxXQUFhckgsRUFBRXNELFVBQVVpRSxVQUFVLG9CQUVyRGpCLGNBQWdCLFdBQ2YsR0FBSXRHLEVBQUUsa0NBQWtDbUQsUUFBVW5ELEVBQUUsNEJBQTRCbUQsT0FBUSxDQUN2RixHQUFJcUUsR0FBU3hILEVBQUUsa0NBQWtDVSxJQUFJLG1CQUFtQk8sUUFBUSxlQUFlLElBQzNGd0csRUFBTSxHQUFJQyxNQUNkRCxHQUFJRSxPQUFTLFdBQ1osR0FBSUMsR0FBV0gsRUFBSWhCLE1BQ2ZvQixFQUFZSixFQUFJZixPQUNoQm9CLEVBQWU5SCxFQUFFLDRCQUE0QitILE1BQzdDQyxFQUFZaEksRUFBRSxrQ0FBa0MrSCxNQUNoREUsRUFBaUJqSSxFQUFFZ0ksR0FBV3ZCLFFBQzlCeUIsRUFBa0JsSSxFQUFFZ0ksR0FBV3RCLFNBQy9CeUIsRUFBbUJQLEVBQVNDLEVBQzVCTyxFQUF1QkgsRUFBZUMsQ0FDMUMsSUFBSUUsRUFBdUJELEVBQWtCLENBQzVDLEdBQUlFLEdBQWVDLFNBQVVULEVBQVlJLEVBQWdCTCxFQUN6RDVILEdBQUU4SCxHQUFjcEIsT0FBTzJCLEdBQWM1QixNQUFNLFFBRTVDLEdBQTJCMEIsRUFBdkJDLEVBQXlDLENBQzVDLEdBQUlHLEdBQWNELFNBQVVWLEVBQVdNLEVBQWlCTCxFQUN4RDdILEdBQUU4SCxHQUFjckIsTUFBTThCLEdBQWE3QixPQUFPLFVBRzVDZSxFQUFJZSxJQUFNaEIsSUFLYnhILEdBQUVSLEdBQUcrSCxVQUFZLFNBQVNrQixHQUV6QixNQUFJbkIsR0FBUW1CLEdBQ0puQixFQUFTbUIsR0FBU0MsTUFBT2pKLEtBQU1rSixNQUFNQyxVQUFVQyxNQUFNQyxLQUFNQyxVQUFXLElBQ2hELGdCQUFYTixJQUF5QkEsTUFHM0N6SSxHQUFFZ0osTUFBTyxrQkFBcUJQLEVBQVMsOEJBRmhDbkIsRUFBUWpDLEtBQUtxRCxNQUFPakosS0FBTXNKLFlBTW5DL0ksRUFBRXNELFVBQVVpRSxVQUFVLFNBRXBCdkgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUuY29uZmlnKHtcclxuXHRiYXNlVXJsOiAndmVuZG9yJyxcclxuXHRwYXRoczoge1xyXG5cdFx0J2pxdWVyeSc6ICdqcXVlcnkvZGlzdC9qcXVlcnkubWluJyxcclxuXHRcdCdiYWNrYm9uZSc6ICdiYWNrYm9uZS9iYWNrYm9uZScsXHJcblx0XHQndGV4dCc6ICd0ZXh0L3RleHQnLFxyXG5cdFx0J3VuZGVyc2NvcmUnOiAndW5kZXJzY29yZS91bmRlcnNjb3JlJyxcclxuXHRcdCdoYW5kbGViYXJzJzogJ2hhbmRsZWJhcnMvaGFuZGxlYmFycycsXHJcblx0XHQncGFyYWxsYXgnOiAncGFyYWxsYXgvZGVwbG95L3BhcmFsbGF4Lm1pbidcclxuXHR9LFxyXG5cdHNoaW06IHtcclxuXHRcdCdiYWNrYm9uZSc6IHtcclxuXHRcdFx0ZGVwczogWyd1bmRlcnNjb3JlJywgJ2pxdWVyeSddXHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbnZhciBhcHAsXHJcblx0SGFuZGxlYmFycztcclxucmVxdWlyZShbXHJcblx0J2hhbmRsZWJhcnMnLFxyXG5cdCdqcXVlcnknLFxyXG5cdCd0ZXh0JyxcclxuXHQnYmFja2JvbmUnLFxyXG5cdCd1bmRlcnNjb3JlJyxcclxuXHRcInBhcmFsbGF4XCJcclxuXSwgZnVuY3Rpb24oaGFuZGxlYmFycykge1xyXG5cdEhhbmRsZWJhcnMgPSBoYW5kbGViYXJzO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEhhbmRsZWJhcnMgSGVscGVycy0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcIm1hdGhcIiwgZnVuY3Rpb24obHZhbHVlLCBvcGVyYXRvciwgcnZhbHVlLCBvcHRpb25zKSB7XHJcblx0ICAgIGx2YWx1ZSA9IHBhcnNlRmxvYXQobHZhbHVlKTtcclxuXHQgICAgcnZhbHVlID0gcGFyc2VGbG9hdChydmFsdWUpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgIHJldHVybiB7XHJcblx0ICAgICAgICBcIitcIjogbHZhbHVlICsgcnZhbHVlLFxyXG5cdCAgICAgICAgXCItXCI6IGx2YWx1ZSAtIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiKlwiOiBsdmFsdWUgKiBydmFsdWUsXHJcblx0ICAgICAgICBcIi9cIjogbHZhbHVlIC8gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIlXCI6IGx2YWx1ZSAlIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiPT1cIjogbHZhbHVlID09IHJ2YWx1ZVxyXG5cdCAgICB9W29wZXJhdG9yXTtcclxuXHR9KTtcclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkNvbmQnLCBmdW5jdGlvbiAodjEsIG9wZXJhdG9yLCB2Miwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7XHJcblx0ICAgICAgICBjYXNlICc9PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA9PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPT09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPCc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnJiYnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgJiYgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJ3x8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIHx8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBkZWZhdWx0OlxyXG5cdCAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgIH1cclxuXHR9KTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBBcHAgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRBcHAgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblx0XHRlbDogJCgnI2FwcCcpLFxyXG5cdFx0ZXZlbnRzOiB7XHJcblx0ICAgIFwiY2xpY2sgYVwiOlwib3BlblwiXHJcblx0ICB9LFxyXG5cdCAgb3BlbjogZnVuY3Rpb24oZSl7XHJcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcclxuXHRcdFx0dmFyIHVybCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpLmF0dHIoXCJocmVmXCIpO1xyXG5cdFxyXG5cdFx0XHRzd2l0Y2ggKHVybCl7XHJcblx0XHRcdFx0Y2FzZSBcIiNsZXNzb25zXCI6XHJcblx0XHRcdFx0XHQkKFwiaHRtbCxib2R5XCIpLmNzcyhcIm92ZXJmbG93LXlcIixcImhpZGRlblwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb1RvcCgpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNib29rL3N0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3ZpZGVvL2FudGlxXCI6XHJcblx0XHRcdFx0ICAgIGFwcC5wcmludFZpZGVvKFwiYW50aXFcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdCAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50VmlkZW8oXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQmNC70LvRjtGB0YLRgNCw0YbQuNC4INC6INCx0LDRgdC90Y/QvFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50VmlkZW8oXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dhbWVzL2FudGlxXCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdC8vYXBwLnNob3dUZXN0UGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHQgXHRhcHAuZ29CYWNrKCk7XHJcblx0ICAgICBcdFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIsXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0Ly9hcHAuc2hvd1Rlc3RQYWdlcyhcInN0b3J5XCIpO1xyXG5cdFx0XHQgICAgXHRhcHAuZ29CYWNrKCk7XHJcblx0ICAgICAgXHRcdFx0YXBwLnRlc3RCcmVhZGNydW1ic1JlbmRlcihcItCY0LPRgNCwXCIsXCLQkdCw0YHQvdC4INCa0YDRi9C70L7QstCwXCIsXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdC8vYXBwLnNob3dUZXN0UGFnZXMoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHQgICAgXHRhcHAuZ29CYWNrKCk7XHJcblx0ICAgIFx0XHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiLFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ29Gcm9udFwiOlxyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3Jlc2V0XCI6XHJcblx0XHRcdFx0XHRhcHAudGVzdENsZWFyZWQoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3NvdW5kXCI6XHJcblx0XHRcdFx0XHRhcHAuYXVkaW9Td2ljdGNoZXIoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZnJvbVRlc3RUb1ZpZGVvXCI6XHJcblx0XHRcdFx0XHRhcHAuZ29Cb3R0b20oKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLWFudGlxXCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dldFJldmFyZC1zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLmRlYWN0aXZhdGVRdWVzdGlvbih0aGlzKTtcclxuXHRcdFx0XHRcdGFwcC5jaGVja0ltYWdlUHJvZ3Jlc3MoKTtcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLmRlYWN0aXZhdGVRdWVzdGlvbih0aGlzKTtcclxuXHRcdFx0XHRcdGFwcC5jaGVja0ltYWdlUHJvZ3Jlc3MoKTtcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIFwid3d3LnRyZXR5YWtvdmdhbGxlcnkucnVcIjpcclxuXHRcdFx0XHRcdHdpbmRvdy5vcGVuKCdodHRwOi8vd3d3LnRyZXR5YWtvdmdhbGxlcnkucnUvJywgJ19ibGFuaycpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHQgIH0sXHJcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFxyXG5cdFx0XHR0aGlzLm9uKCdEaXNwbGF5OkxvYWQnLCBmdW5jdGlvbihkaXNwbGF5TmFtZSkge1xyXG5cdFx0XHRcdHNlbGYucmVuZGVyKCk7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygn0KDQtdC90LTQtdGAINGN0LrRgNCw0L3QsCBcIicgKyBkaXNwbGF5TmFtZSArICdcIiDQt9Cw0LLQtdGA0YjQtdC9Jyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCfQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C+0LbQtdC90LjRjyDQt9Cw0LLQtdGA0YjQtdC90LAnKTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRyb3V0ZTogZnVuY3Rpb24obGluaywgbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwi0JfQsNC/0YPRgdC60LDQtdC8IFJvdXRlINC6IFwiLCBsaW5rLCBcIiBjINC80L7QtNGD0LvRj9C80LggXCIsbW9kdWxlc0xpc3QpXHJcblx0XHRcdHRoaXMubGluayA9IGxpbms7XHJcblx0XHJcblx0XHRcdC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCw0LvQuNGH0LjQtSDQv9C+0LTQutC70Y7Rh9Cw0LXQvNGL0YUg0LzQvtC00YPQu9C10LksINC10YHQu9C4INC40YUg0L3QtdGCINC30LDQs9GA0YPQttCw0LXQvCDRgtC+0LvRjNC60L4g0YjQsNCx0LvQvtC9XHJcblx0XHRcdGlmICghbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKGxpbmspO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vINCd0LDRiNC70Lgg0LzQvtC00YPQu9GMLCDQuNC70Lgg0LzQvtC00YPQu9C4LiDQl9Cw0L/Rg9GB0LrQsNC10Lwg0LjRhSDQt9Cw0LPRgNGD0LfQutGDINCyINC60L7QvdGC0LXQutGB0YIg0L/RgNC40LvQvtC20LXQvdC40Y8uXHJcblx0XHRcdFx0dGhpcy5sb2FkTW9kdWxlcyhtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8g0JzQvtC00YPQu9GMINC40LvQuCDQvNC+0LTRg9C70Lgg0LfQsNCz0YDRg9C20LXQvdGLLiDQndCw0YfQuNC90LDQtdC8INC30LDQs9GA0YPQt9C60YMg0YjQsNCx0LvQvtC90LAuXHJcblx0XHRcdFx0dGhpcy5vZmYoJ01vZHVsZTpMb2FkJykub24oJ01vZHVsZTpMb2FkJywgZnVuY3Rpb24obW9kdWxlcykge1xyXG5cdFx0XHRcdFx0dGhpcy5sb2FkVGVtcGxhdGUodGhpcy5saW5rKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCfQl9Cw0LPRgNGD0LfQutCwINC80L7QtNGD0LvRjyjQtdC5KVwiJyArIG1vZHVsZXMgKyAnXCIg0LfQsNCy0LXRgNGI0LXQvdCwJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQrdC60YDQsNC90LBcIicgKyB0aGlzLmxpbmsgKyAnXCIg0L3QsNGH0LDQu9Cw0YHRjCcpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0bG9hZFRlbXBsYXRlOiBmdW5jdGlvbihkaXNwbGF5TmFtZSkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHJlcXVpcmUoW1xyXG5cdFx0XHRcdCcuLi8uLi90ZW1wbGF0ZS9kaXNwbGF5cy8nICsgZGlzcGxheU5hbWUgKyAnLycgKyBkaXNwbGF5TmFtZSxcclxuXHRcdFx0XHQndGV4dCEuLi8uLi90ZW1wbGF0ZS9kaXNwbGF5cy8nICsgZGlzcGxheU5hbWUgKyAnLycgKyBkaXNwbGF5TmFtZSArICcuaHRtbCcsXHJcblx0XHRcdF0sIGZ1bmN0aW9uKGpzLCBodG1sKSB7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygn0K3QutGA0LDQvSBcIicgKyBkaXNwbGF5TmFtZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0Xy5leHRlbmQoc2VsZiwganMpO1xyXG5cdFx0XHRcdHNlbGYuaHRtbCA9ICQoaHRtbCk7XHJcblx0XHRcdFx0c2VsZi5sb2FkQ3NzKGRpc3BsYXlOYW1lLCAnZGlzcGxheScpO1xyXG5cdFx0XHRcdHNlbGYudHJpZ2dlcignRGlzcGxheTpMb2FkJywgZGlzcGxheU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkTW9kdWxlczogZnVuY3Rpb24obW9kdWxlc0xpc3QpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL9CX0LDQs9GA0YPQttCw0LXQvCDQvNC+0LTRg9C70LguXHJcblx0XHRcdG1vZHVsZXNMaXN0LmZvckVhY2goZnVuY3Rpb24obW9kdWxlLCBpKXtcclxuXHRcdFx0XHQvLyBpZiAoIV8uaW5jbHVkZShzZWxmLmxvYWRlZE1vZHVsZXMsIG1vZHVsZSkpIHtcclxuXHRcdFx0XHRcdHJlcXVpcmUoW1xyXG5cdFx0XHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvbW9kdWxlcy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICxcclxuXHRcdFx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvbW9kdWxlcy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5odG1sJ1xyXG5cdFx0XHRcdFx0XSwgZnVuY3Rpb24oanMsIGh0bWwpIHtcclxuXHRcdFx0XHRcdFx0Ly9jb25zb2xlLmxvZygn0JzQvtC00YPQu9GMIFwiJyArIG1vZHVsZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0XHRcdHNlbGZbbW9kdWxlICsgJ0h0bWwnXSA9ICQoaHRtbCk7XHJcblx0XHRcdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5sb2FkQ3NzKG1vZHVsZSwgJ21vZHVsZScpO1xyXG5cdFx0XHRcdFx0XHRpZigobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSkgPT09IGkpe1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vIH1lbHNlIGlmIChtb2R1bGVzTGlzdC5sZW5ndGggLSAxID09IGkpe1xyXG5cdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ21vZHVsZXNMaXN0Lmxlbmd0aCcsIG1vZHVsZXNMaXN0Lmxlbmd0aClcclxuXHRcdFx0XHQvLyBcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkQ3NzOiBmdW5jdGlvbihtb2R1bGUsIG1kKSB7XHJcblx0XHRcdHZhciBwYXJ0VXBsID0gbWQgPT09ICdkaXNwbGF5JyA/ICdkaXNwbGF5cycgOiAnbW9kdWxlcyc7XHJcblx0XHRcdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHRcdGxpbmsudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdFx0bGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdFx0bGluay5ocmVmID0gJy4uLy4uL3RlbXBsYXRlLycgKyBwYXJ0VXBsICsgJy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5jc3MnO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cmVuZGVySGFuZGxlYmFyc1RlbXBsYXRlOiBmdW5jdGlvbihzZWxlY3RvcixkYXRhKSB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ9Ch0L7Qt9C00LDQtdC8INGI0LDQsdC70L7QvSBIYW5kbGViYXJzJywgc2VsZWN0b3IsIGRhdGEpO1xyXG5cdFxyXG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoJChzZWxlY3RvcikuaHRtbCgpKTtcclxuXHRcdFx0cmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGFwcCA9IG5ldyBBcHAoKTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBSb3V0ZXIgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHR2YXIgQXBwUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XHJcblx0ICAgIHJvdXRlczoge1xyXG5cdCAgICAgICAgXCJcIjogXCJkZWZhdWx0Um91dGVcIixcclxuXHQgICAgICAgIFwibGVzc29uc1wiOlwiZ2FsbGVyeVwiLFxyXG5cdCAgICAgICAgXCJnYW1lcy86dGVzdFwiOlwiZ2FtZXNcIixcclxuXHQgICAgICAgIFwiYm9vay86bmFtZVwiOlwicmVhZGVyXCIsXHJcblx0ICAgICAgICBcInZpZGVvLzpuYW1lXCI6XCJ2aWRlb1wiXHJcblx0ICAgICAgICAvLyBtYXRjaGVzIGh0dHA6Ly9leGFtcGxlLmNvbS8jYW55dGhpbmctaGVyZVxyXG5cdCAgICB9XHJcblx0fSk7XHJcblx0Ly8gSW5pdGlhdGUgdGhlIHJvdXRlclxyXG5cdHZhciByb3V0ZXIgPSBuZXcgQXBwUm91dGVyO1xyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6ZGVmYXVsdFJvdXRlJywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnbWFpblNjcmVlbicsIFsncHJlbG9hZGVyJ10pO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpnYWxsZXJ5JywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpnYW1lcycsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6cmVhZGVyJywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTp2aWRlbycsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6cmVzZXQnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHQvLyBTdGFydCBCYWNrYm9uZSBoaXN0b3J5IGEgbmVjZXNzYXJ5IHN0ZXAgZm9yIGJvb2ttYXJrYWJsZSBVUkwnc1xyXG5cdEJhY2tib25lLmhpc3Rvcnkuc3RhcnQoe3B1c2hTdGF0ZSA6IGZhbHNlfSk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gQmFja2dyb3VuZFJlc2l6ZXIgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHQvKlxyXG5cdCogalF1ZXJ5IEJhY2tncm91bmQgdmlkZW8gcGx1Z2luIGZvciBqUXVlcnlcclxuXHQqIC0tLVxyXG5cdCogQ29weXJpZ2h0IDIwMTEsIFZpY3RvciBDb3Vsb24gKGh0dHA6Ly92aWN0b3Jjb3Vsb24uZnIpXHJcblx0KiBSZWxlYXNlZCB1bmRlciB0aGUgTUlULCBCU0QsIGFuZCBHUEwgTGljZW5zZXMuXHJcblx0KiBiYXNlZCBvbiBqUXVlcnkgUGx1Z2luIEJvaWxlcnBsYXRlIDEuM1xyXG5cdCovXHJcblx0KGZ1bmN0aW9uKCQpIHtcclxuXHRcclxuXHQgICQuYmFja2dyb3VuZFZpZGVvID0gZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcclxuXHRcclxuXHQgICAgdmFyIGRlZmF1bHRzID0ge1xyXG5cdCAgICAgIHZpZGVvaWQ6IFwidmlkZW9fYmFja2dyb3VuZFwiLFxyXG5cdCAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuXHQgICAgICBsb29wOiBmYWxzZSxcclxuXHQgICAgICBwcmVsb2FkOiB0cnVlXHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIHBsdWdpbiA9IHRoaXM7XHJcblx0XHJcblx0ICAgIHBsdWdpbi5zZXR0aW5ncyA9IHt9XHJcblx0XHJcblx0ICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgcGx1Z2luLnNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHQgICAgICBwbHVnaW4uZWwgPSBlbDtcclxuXHRcclxuXHQgICAgICBidWlsZFZpZGVvKCk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGJ1aWxkVmlkZW8gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmFyIGh0bWwgPSAnJyxcclxuXHQgICAgICAgICAgcHJlbG9hZFN0cmluZyA9ICcnLFxyXG5cdCAgICAgICAgICBhdXRvcGxheVN0cmluZyA9ICcnLFxyXG5cdCAgICAgICAgICBsb29wU3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIF9wcmVsb2FkID0gcGx1Z2luLnNldHRpbmdzLnByZWxvYWQsXHJcblx0ICAgICAgICAgIF9hdXRvcGxheSA9IHBsdWdpbi5zZXR0aW5ncy5hdXRvcGxheSxcclxuXHQgICAgICAgICAgX2xvb3AgPSBwbHVnaW4uc2V0dGluZ3MubG9vcDtcclxuXHRcclxuXHQgICAgICBpZiAoX3ByZWxvYWQpIHtcclxuXHQgICAgICAgIHByZWxvYWRTdHJpbmcgPSAncHJlbG9hZD1cImZhbHNlXCInO1xyXG5cdCAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICBwcmVsb2FkU3RyaW5nID0gJyc7XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIGlmIChfYXV0b3BsYXkpIHtcclxuXHQgICAgICAgIGF1dG9wbGF5U3RyaW5nID0gJ2F1dG9wbGF5PVwiZmFsc2VcIic7XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIGF1dG9wbGF5U3RyaW5nID0gJyc7XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIGlmIChfbG9vcCkge1xyXG5cdCAgICAgICAgbG9vcFN0cmluZyA9ICdsb29wPVwiZmFsc2VcIic7XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIGxvb3BTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaHRtbCArPSAnPHZpZGVvIGlkPVwiJytwbHVnaW4uc2V0dGluZ3MudmlkZW9pZCsnXCInICsgcHJlbG9hZFN0cmluZyArIGF1dG9wbGF5U3RyaW5nICsgbG9vcFN0cmluZztcclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLnBvc3Rlcikge1xyXG5cdCAgICAgICAgaHRtbCArPSAnIHBvc3Rlcj1cIicgKyBwbHVnaW4uc2V0dGluZ3MucG9zdGVyICsgJ1wiICc7XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIGh0bWwgKz0gJ3N0eWxlPVwiZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtib3R0b206MDtyaWdodDowO3otaW5kZXg6Mjt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO1wiPic7XHJcblx0ICAgICAgZm9yKHZhciBpPTA7IGkgPCBwbHVnaW4uc2V0dGluZ3MudHlwZXMubGVuZ3RoOyBpKyspIHtcclxuXHQgICAgICAgIGh0bWwgKz0gJzxzb3VyY2Ugc3JjPVwiJytwbHVnaW4uc2V0dGluZ3MucGF0aCtwbHVnaW4uc2V0dGluZ3MuZmlsZW5hbWUrJy4nK3BsdWdpbi5zZXR0aW5ncy50eXBlc1tpXSsnXCIgdHlwZT1cInZpZGVvLycrcGx1Z2luLnNldHRpbmdzLnR5cGVzW2ldKydcIiAvPic7XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIGh0bWwgKz0gJzwvdmlkZW8+JztcclxuXHQgICAgICBwbHVnaW4uZWwuYXBwZW5kKGh0bWwpO1xyXG5cdCAgICAgIHBsdWdpbi52aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGx1Z2luLnNldHRpbmdzLnZpZGVvaWQpO1xyXG5cdCAgICAgIHBsdWdpbi4kdmlkZW9FbCA9ICQocGx1Z2luLnZpZGVvRWwpO1xyXG5cdCAgICAgIHBsdWdpbi4kdmlkZW9FbC5mYWRlSW4oMCk7XHJcblx0ICAgICAgc2V0UHJvcG9ydGlvbigpO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBzZXRQcm9wb3J0aW9uID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgIHZhciBwcm9wb3J0aW9uID0gZ2V0UHJvcG9ydGlvbigpO1xyXG5cdCAgICAgIHBsdWdpbi4kdmlkZW9FbC53aWR0aChwcm9wb3J0aW9uKnBsdWdpbi5zZXR0aW5ncy53aWR0aCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLmhlaWdodChwcm9wb3J0aW9uKnBsdWdpbi5zZXR0aW5ncy5oZWlnaHQpO1xyXG5cdFxyXG5cdCAgICAgIGlmICh0eXBlb2YgcGx1Z2luLnNldHRpbmdzLmFsaWduICE9PSAndW5kZWZpbmVkJykge1xyXG5cdCAgICAgICAgY2VudGVyVmlkZW8oKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGdldFByb3BvcnRpb24gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmFyIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcblx0ICAgICAgdmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuXHQgICAgICB2YXIgd2luZG93UHJvcG9ydGlvbiA9IHdpbmRvd1dpZHRoIC8gd2luZG93SGVpZ2h0O1xyXG5cdCAgICAgIHZhciBvcmlnUHJvcG9ydGlvbiA9IHBsdWdpbi5zZXR0aW5ncy53aWR0aCAvIHBsdWdpbi5zZXR0aW5ncy5oZWlnaHQ7XHJcblx0ICAgICAgdmFyIHByb3BvcnRpb24gPSB3aW5kb3dIZWlnaHQgLyBwbHVnaW4uc2V0dGluZ3MuaGVpZ2h0O1xyXG5cdFxyXG5cdCAgICAgIGlmICh3aW5kb3dQcm9wb3J0aW9uID49IG9yaWdQcm9wb3J0aW9uKSB7XHJcblx0ICAgICAgICBwcm9wb3J0aW9uID0gd2luZG93V2lkdGggLyBwbHVnaW4uc2V0dGluZ3Mud2lkdGg7XHJcblx0ICAgICAgfVxyXG5cdFxyXG5cdCAgICAgIHJldHVybiBwcm9wb3J0aW9uO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhciBjZW50ZXJWaWRlbyA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICAgIHZhciBjZW50ZXJYID0gKCgkKHdpbmRvdykud2lkdGgoKSA+PiAxKSAtIChwbHVnaW4uJHZpZGVvRWwud2lkdGgoKSA+PiAxKSkgfCAwO1xyXG5cdCAgICAgIHZhciBjZW50ZXJZID0gKCgkKHdpbmRvdykuaGVpZ2h0KCkgPj4gMSkgLSAocGx1Z2luLiR2aWRlb0VsLmhlaWdodCgpID4+IDEpKSB8IDA7XHJcblx0XHJcblx0ICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hbGlnbiA9PSAnY2VudGVyWFknKSB7XHJcblx0ICAgICAgICBwbHVnaW4uJHZpZGVvRWwuY3NzKHsgJ2xlZnQnOiBjZW50ZXJYLCAndG9wJzogY2VudGVyWSB9KTtcclxuXHQgICAgICAgIHJldHVybjtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hbGlnbiA9PSAnY2VudGVyWCcpIHtcclxuXHQgICAgICAgIHBsdWdpbi4kdmlkZW9FbC5jc3MoJ2xlZnQnLCBjZW50ZXJYKTtcclxuXHQgICAgICAgIHJldHVybjtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hbGlnbiA9PSAnY2VudGVyWScpIHtcclxuXHQgICAgICAgIHBsdWdpbi4kdmlkZW9FbC5jc3MoJ3RvcCcsIGNlbnRlclkpO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICBpbml0KCk7XHJcblx0XHJcblx0ICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7IHNldFByb3BvcnRpb24oKTsgfSk7XHJcblx0ICB9XHJcblx0fSkoJCk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gU2V0UG9pbnRzIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0LypcclxuXHQqINCc0LDRgdGI0YLQsNCx0LjRgNGD0LXQvCDRgNC+0LTQuNGC0LXQu9GM0YHQutC40Lkg0LrQvtC90YLQtdC50L3QtdGAINGE0L7QvdC+0LLQvtCz0L4g0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQv9C+0LQg0YTQsNC60YLQuNGH0LXRgdC60LjQtSDRgNCw0LfQvNC10YDRiyDRhNC+0L3QsFxyXG5cdCogJChkb2N1bWVudCkuc2V0UG9pbnRzKCdpbml0Jyk7IC8vINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPXHJcblx0KiAkKGRvY3VtZW50KS5zZXRQb2ludHMoJ3NldFByb3BvcnRpb24nKTsgLy8g0LLRi9C30L7QsiDQvNC10YLQvtC00LAg0L/QtdGA0LXRgdGC0YDQvtC10L3QuNGPINC40LfQvtCx0YDQsNC20LXQvdC40Y9cclxuXHQqINCS0L7QvtCx0YnQtSwg0LXRgdC70Lgg0L/RgNC+0L/QvtGA0YbQuNC4INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LLRgdC10LPQtNCwINC+0LTQuNC90LDQutC+0LLRiyDQuCDRgdC+0YHRgtCw0LLQu9GP0Y7RgiDQuiDQv9GA0LjQvNC10YDRgyAxNjo5LCDRgtC+INC80L7QttC90L4g0LogLnNldC1wb2ludHMg0LTQvtCx0LDQstC40YLRjCBcInBhZGRpbmctYm90dG9tOiA1Ni4yNSU7XCIg0Lgg0YHQutGA0LjQv9GCINC90LXQv9C+0L3QsNC00L7QsdC40YLRgdGPXHJcblx0KiDQndC+INCyINC90LDRiNC10Lwg0YHQu9GD0YfQsNC1INC/0YDQvtC/0L7RgNGG0LjQuCDQuNC30L7QsdGA0LDQttC10L3QuNC5INC80L7Qs9GD0YIg0LHRi9GC0Ywg0LvRjtCx0YvQvNC4INC4INC30LDRgNCw0L3QtdC1INC90LXQuNC30LLQtdGB0YLQvdGLLCDQv9C+0Y3RgtC+0LzRgyDQt9C00LXRgdGMINGC0L7Qu9GM0LrQviDRgdC60YDQuNC/0YLQvtC8XHJcblx0Ki9cclxuXHQoZnVuY3Rpb24oJCkge1xyXG5cdFx0XHJcblx0XHR2YXIgbWV0aG9kcyA9IHtcclxuXHRcdFx0aW5pdCA6IGZ1bmN0aW9uKCkgeyBcclxuXHRcdFx0XHQkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkgeyAkKGRvY3VtZW50KS5zZXRQb2ludHMoJ3NldFByb3BvcnRpb24nKTsgfSk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldFByb3BvcnRpb24gOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoJCgnLm1hcHMuYWN0aXZlIC5yZXNwb25zaXZlLWltYWdlJykubGVuZ3RoICYmICQoJy5tYXBzLmFjdGl2ZSAuc2V0LXBvaW50cycpLmxlbmd0aCkgeyAvLyDQtdGB0LvQuCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0L3QvtCy0LDRjyDQvNC+0LTQtdC70Ywg0LzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QuNGPINC40LfQvtCx0YDQsNC20LXQvdC40Lkg0Lgg0LXRgdGC0Ywg0YLQvtGH0LrQuCwg0LfQvdCw0YfQuNGCINC90YPQttC90L4g0YTQuNC60YHQuNGC0YxcclxuXHRcdFx0XHRcdHZhciBpbWdTcmMgPSAkKCcubWFwcy5hY3RpdmUgLnJlc3BvbnNpdmUtaW1hZ2UnKS5jc3MoJ2JhY2tncm91bmRJbWFnZScpLnJlcGxhY2UoL3VybFxcKFwifFwiXFwpL2lnLCcnKTtcclxuXHRcdFx0XHRcdHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdFx0XHRcdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0dmFyIHdpZHRoSW1nID0gaW1nLndpZHRoO1xyXG5cdFx0XHRcdFx0XHR2YXIgaGVpZ2h0SW1nID0gaW1nLmhlaWdodDtcclxuXHRcdFx0XHRcdFx0dmFyIGNvbnRhaW5lclNldCA9ICQoJy5tYXBzLmFjdGl2ZSAuc2V0LXBvaW50cycpLmdldCgpO1xyXG5cdFx0XHRcdFx0XHR2YXIgY29udGFpbmVyID0gJCgnLm1hcHMuYWN0aXZlIC5yZXNwb25zaXZlLWltYWdlJykuZ2V0KCk7XHJcblx0XHRcdFx0XHRcdHZhciB3aWR0aENvbnRhaW5lciA9ICQoY29udGFpbmVyKS53aWR0aCgpO1xyXG5cdFx0XHRcdFx0XHR2YXIgaGVpZ2h0Q29udGFpbmVyID0gJChjb250YWluZXIpLmhlaWdodCgpO1xyXG5cdFx0XHRcdFx0XHR2YXIgYXNwZWN0cmF0aW9JbWFnZSA9IHdpZHRoSW1nL2hlaWdodEltZztcclxuXHRcdFx0XHRcdFx0dmFyIGFzcGVjdHJhdGlvQ29udGFpbmVyID0gd2lkdGhDb250YWluZXIvaGVpZ2h0Q29udGFpbmVyO1xyXG5cdFx0XHRcdFx0XHRpZiAoYXNwZWN0cmF0aW9Db250YWluZXIgPiBhc3BlY3RyYXRpb0ltYWdlKSB7IC8vINC90LXRhdCy0LDRgtC60LAg0LLRi9GB0L7RgtGLXHJcblx0XHRcdFx0XHRcdFx0dmFyIHJlc3VsdEhlaWdodCA9IHBhcnNlSW50KChoZWlnaHRJbWcgKiB3aWR0aENvbnRhaW5lcikvd2lkdGhJbWcpO1xyXG5cdFx0XHRcdFx0XHRcdCQoY29udGFpbmVyU2V0KS5oZWlnaHQocmVzdWx0SGVpZ2h0KS53aWR0aCgnMTAwJScpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmIChhc3BlY3RyYXRpb0NvbnRhaW5lciA8IGFzcGVjdHJhdGlvSW1hZ2UpIHsgIC8vINC90LXRhdCy0LDRgtC60LAg0YjQuNGA0LjQvdGLXHJcblx0XHRcdFx0XHRcdFx0dmFyIHJlc3VsdFdpZHRoID0gcGFyc2VJbnQoKHdpZHRoSW1nICogaGVpZ2h0Q29udGFpbmVyKS9oZWlnaHRJbWcpO1xyXG5cdFx0XHRcdFx0XHRcdCQoY29udGFpbmVyU2V0KS53aWR0aChyZXN1bHRXaWR0aCkuaGVpZ2h0KCcxMDAlJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGltZy5zcmMgPSBpbWdTcmM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQkLmZuLnNldFBvaW50cyA9IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKG1ldGhvZHNbbWV0aG9kXSkge1xyXG5cdFx0XHRcdHJldHVybiBtZXRob2RzWyBtZXRob2QgXS5hcHBseSggdGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcclxuXHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgISBtZXRob2QgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5lcnJvciggJ9Cc0LXRgtC+0LQg0YEg0LjQvNC10L3QtdC8ICcgKyAgbWV0aG9kICsgJyDQvdC1INGB0YPRidC10YHRgtCy0YPQtdGCINCyIHNldFBvaW50cycgKTtcclxuXHRcdFx0fSBcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0JChkb2N1bWVudCkuc2V0UG9pbnRzKCdpbml0Jyk7XHJcblx0XHRcclxuXHR9KSgkKTtcclxuXHRcclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
