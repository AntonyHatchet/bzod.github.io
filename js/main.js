require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}},waitSeconds:25});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,a,r,t){return e=parseFloat(e),r=parseFloat(r),{"+":e+r,"-":e-r,"*":e*r,"/":e/r,"%":e%r,"==":e==r}[a]}),Handlebars.registerHelper("ifCond",function(e,a,r,t){switch(a){case"==":return e==r?t.fn(this):t.inverse(this);case"===":return e===r?t.fn(this):t.inverse(this);case"<":return r>e?t.fn(this):t.inverse(this);case"<=":return r>=e?t.fn(this):t.inverse(this);case">":return e>r?t.fn(this):t.inverse(this);case">=":return e>=r?t.fn(this):t.inverse(this);case"&&":return e&&r?t.fn(this):t.inverse(this);case"||":return e||r?t.fn(this):t.inverse(this);default:return t.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var a=$(e.target).closest("a").attr("href");switch(a){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.stopLine(),app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#book/story":app.stopLine(),app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#book/antiq":app.stopLine(),app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#video/antiq":app.stopLine(),app.printVideo("antiq"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#video/story":app.stopLine(),app.printVideo("story"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#video/history":app.stopLine(),app.printVideo("history"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"#games/antiq":app.printMap("antiq"),app.printTestPages("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.printTestPages("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.printTestPages("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.trigger("Tests:Cleared"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории")}},initialize:function(){var e=this;this.loadedModules=[],this.on("Display:Load",function(a){e.render(),console.log('Рендер экрана "'+a+'" завершен')}),console.log("Инициализация приложения завершена")},route:function(e,a){console.log("Запускаем Route к ",e," c модулями ",a),this.link=e,a?(this.loadModules(a),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var a=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(r,t){console.log('Экран "'+e+'" загружен'),_.extend(a,r),a.html=$(t),a.loadCss(e,"display"),a.trigger("Display:Load",e)})},loadModules:function(e){var a=this;e.forEach(function(r,t){require(["../../template/modules/"+r+"/"+r,"text!../../template/modules/"+r+"/"+r+".html"],function(o,s){console.log('Модуль "'+r+'" загружен'),a[r+"Html"]=$(s),_.extend(a,o),a.loadCss(r,"module"),a.loadedModules.push(r),e.length-1===t&&a.trigger("Module:Load",e)})})},loadCss:function(e,a){var r="display"===a?"displays":"modules",t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href="../../template/"+r+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(t)},renderHandlebarsTemplate:function(e,a){console.log("Создаем шаблон Handlebars",e,a);var r=Handlebars.compile($(e).html());return r(a)}}),app=new App;var a=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),r=new a;r.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),r.on("route:gallery",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:games",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:reader",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:video",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:reset",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsIndhaXRTZWNvbmRzIiwiYXBwIiwiSGFuZGxlYmFycyIsInJlZ2lzdGVySGVscGVyIiwibHZhbHVlIiwib3BlcmF0b3IiLCJydmFsdWUiLCJvcHRpb25zIiwicGFyc2VGbG9hdCIsIisiLCItIiwiKiIsIi8iLCIlIiwiPT0iLCJ2MSIsInYyIiwiZm4iLCJ0aGlzIiwiaW52ZXJzZSIsIkFwcCIsIkJhY2tib25lIiwiVmlldyIsImV4dGVuZCIsImVsIiwiJCIsImV2ZW50cyIsImNsaWNrIGEiLCJvcGVuIiwiZSIsInByZXZlbnREZWZhdWx0IiwidXJsIiwidGFyZ2V0IiwiY2xvc2VzdCIsImF0dHIiLCJjc3MiLCJoaXN0b3J5IiwibmF2aWdhdGUiLCJ0cmlnZ2VyIiwic3RvcExpbmUiLCJwcmludEJvb2tQYWdlcyIsImJyZWFkY3J1bWJzUmVuZGVyIiwiZ29Ub3AiLCJyZXBsYWNlIiwicHJpbnRWaWRlbyIsImdvQm90dG9tIiwicHJpbnRNYXAiLCJwcmludFRlc3RQYWdlcyIsImdvQmFjayIsInRlc3RCcmVhZGNydW1ic1JlbmRlciIsImdvRnJvbnQiLCJnZXRBY3RpdmVUYWIiLCJhdWRpb1N3aWN0Y2hlciIsImRlYWN0aXZhdGVRdWVzdGlvbiIsImNoZWNrSW1hZ2VQcm9ncmVzcyIsImluaXRpYWxpemUiLCJzZWxmIiwibG9hZGVkTW9kdWxlcyIsIm9uIiwiZGlzcGxheU5hbWUiLCJyZW5kZXIiLCJjb25zb2xlIiwibG9nIiwicm91dGUiLCJsaW5rIiwibW9kdWxlc0xpc3QiLCJsb2FkTW9kdWxlcyIsIm9mZiIsIm1vZHVsZXMiLCJsb2FkVGVtcGxhdGUiLCJqcyIsImh0bWwiLCJfIiwibG9hZENzcyIsImZvckVhY2giLCJtb2R1bGUiLCJpIiwicHVzaCIsImxlbmd0aCIsIm1kIiwicGFydFVwbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJyZWwiLCJocmVmIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsInJlbmRlckhhbmRsZWJhcnNUZW1wbGF0ZSIsInNlbGVjdG9yIiwiZGF0YSIsInRlbXBsYXRlIiwiY29tcGlsZSIsIkFwcFJvdXRlciIsIlJvdXRlciIsInJvdXRlcyIsImxlc3NvbnMiLCJnYW1lcy86dGVzdCIsImJvb2svOm5hbWUiLCJ2aWRlby86bmFtZSIsInJvdXRlciIsInNldFRpbWVvdXQiLCJzdGFydCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLFFBQ1BDLFFBQVMsU0FDVEMsT0FDQ0MsT0FBVSxxQkFDVkMsU0FBWSxvQkFDWkMsS0FBUSxZQUNSQyxXQUFjLHdCQUNkQyxXQUFjLHdCQUNkQyxTQUFZLGdDQUViQyxNQUNDTCxVQUNDTSxNQUFPLGFBQWMsWUFHdkJDLFlBQWEsSUFHZCxJQUFJQyxLQUNIQyxVQUNEZCxVQUNDLGFBQ0EsU0FDQSxPQUNBLFdBQ0EsYUFDQSxZQUNFLFNBQVNRLEdBQ1hNLFdBQWFOLEVBRWJNLFdBQVdDLGVBQWUsT0FBUSxTQUFTQyxFQUFRQyxFQUFVQyxFQUFRQyxHQUlqRSxNQUhBSCxHQUFTSSxXQUFXSixHQUNwQkUsRUFBU0UsV0FBV0YsSUFHaEJHLElBQUtMLEVBQVNFLEVBQ2RJLElBQUtOLEVBQVNFLEVBQ2RLLElBQUtQLEVBQVNFLEVBQ2RNLElBQUtSLEVBQVNFLEVBQ2RPLElBQUtULEVBQVNFLEVBQ2RRLEtBQU1WLEdBQVVFLEdBQ2xCRCxLQUVOSCxXQUFXQyxlQUFlLFNBQVUsU0FBVVksRUFBSVYsRUFBVVcsRUFBSVQsR0FFNUQsT0FBUUYsR0FDSixJQUFLLEtBQ0QsTUFBUVUsSUFBTUMsRUFBTVQsRUFBUVUsR0FBR0MsTUFBUVgsRUFBUVksUUFBUUQsS0FDM0QsS0FBSyxNQUNELE1BQVFILEtBQU9DLEVBQU1ULEVBQVFV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LFdBQ1RwRyxJQUFJd0Msa0JBQWtCLHlCQUF5QnhDLElBQUlrRCxpQkFDbkQsT0FHTmlELEVBQU8xQyxHQUFHLGNBQWUsV0FDckJ6RCxJQUFJOEQsTUFBTSxXQUFZLFlBQVksWUFBYSxVQUFXLFdBQVcsU0FBVSxnQkFBZ0IsT0FBTyxRQUFRLFFBQVEsVUFFdEhzQyxXQUFXLFdBQ1RwRyxJQUFJd0Msa0JBQWtCLHlCQUF5QnhDLElBQUlrRCxpQkFDbkQsT0FJTjlCLFNBQVNlLFFBQVFrRSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZS5jb25maWcoe1xyXG5cdGJhc2VVcmw6ICd2ZW5kb3InLFxyXG5cdHBhdGhzOiB7XHJcblx0XHQnanF1ZXJ5JzogJ2pxdWVyeS9kaXN0L2pxdWVyeScsXHJcblx0XHQnYmFja2JvbmUnOiAnYmFja2JvbmUvYmFja2JvbmUnLFxyXG5cdFx0J3RleHQnOiAndGV4dC90ZXh0JyxcclxuXHRcdCd1bmRlcnNjb3JlJzogJ3VuZGVyc2NvcmUvdW5kZXJzY29yZScsXHJcblx0XHQnaGFuZGxlYmFycyc6ICdoYW5kbGViYXJzL2hhbmRsZWJhcnMnLFxyXG5cdFx0J3BhcmFsbGF4JzogJ3BhcmFsbGF4L2RlcGxveS9wYXJhbGxheC5taW4nXHJcblx0fSxcclxuXHRzaGltOiB7XHJcblx0XHQnYmFja2JvbmUnOiB7XHJcblx0XHRcdGRlcHM6IFsndW5kZXJzY29yZScsICdqcXVlcnknXVxyXG5cdFx0fVxyXG5cdH0sXHJcblx0d2FpdFNlY29uZHM6IDI1XHJcbn0pO1xyXG5cclxudmFyIGFwcCxcclxuXHRIYW5kbGViYXJzO1xyXG5yZXF1aXJlKFtcclxuXHQnaGFuZGxlYmFycycsXHJcblx0J2pxdWVyeScsXHJcblx0J3RleHQnLFxyXG5cdCdiYWNrYm9uZScsXHJcblx0J3VuZGVyc2NvcmUnLFxyXG5cdFwicGFyYWxsYXhcIlxyXG5dLCBmdW5jdGlvbihoYW5kbGViYXJzKSB7XHJcblx0SGFuZGxlYmFycyA9IGhhbmRsZWJhcnM7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gSGFuZGxlYmFycyBIZWxwZXJzLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwibWF0aFwiLCBmdW5jdGlvbihsdmFsdWUsIG9wZXJhdG9yLCBydmFsdWUsIG9wdGlvbnMpIHtcclxuXHQgICAgbHZhbHVlID0gcGFyc2VGbG9hdChsdmFsdWUpO1xyXG5cdCAgICBydmFsdWUgPSBwYXJzZUZsb2F0KHJ2YWx1ZSk7XHJcblx0ICAgICAgICBcclxuXHQgICAgcmV0dXJuIHtcclxuXHQgICAgICAgIFwiK1wiOiBsdmFsdWUgKyBydmFsdWUsXHJcblx0ICAgICAgICBcIi1cIjogbHZhbHVlIC0gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIqXCI6IGx2YWx1ZSAqIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiL1wiOiBsdmFsdWUgLyBydmFsdWUsXHJcblx0ICAgICAgICBcIiVcIjogbHZhbHVlICUgcnZhbHVlLFxyXG5cdCAgICAgICAgXCI9PVwiOiBsdmFsdWUgPT0gcnZhbHVlXHJcblx0ICAgIH1bb3BlcmF0b3JdO1xyXG5cdH0pO1xyXG5cdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmQ29uZCcsIGZ1bmN0aW9uICh2MSwgb3BlcmF0b3IsIHYyLCBvcHRpb25zKSB7XHJcblx0XHJcblx0ICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuXHQgICAgICAgIGNhc2UgJz09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc9PT0nOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgPT09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJzw9JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDw9IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID4gdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJz49JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID49IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICcmJic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSAmJiB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnfHwnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgfHwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEFwcCAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdEFwcCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcclxuXHRcdGVsOiAkKCcjYXBwJyksXHJcblx0XHRldmVudHM6IHtcclxuXHQgICAgXCJjbGljayBhXCI6XCJvcGVuXCJcclxuXHQgIH0sXHJcblx0ICBvcGVuOiBmdW5jdGlvbihlKXtcclxuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFxyXG5cdFx0XHR2YXIgdXJsID0gJChlLnRhcmdldCkuY2xvc2VzdChcImFcIikuYXR0cihcImhyZWZcIik7XHJcblx0XHJcblx0XHRcdHN3aXRjaCAodXJsKXtcclxuXHRcdFx0XHRjYXNlIFwiI2xlc3NvbnNcIjpcclxuXHRcdFx0XHRcdCQoXCJodG1sLGJvZHlcIikuY3NzKFwib3ZlcmZsb3cteVwiLFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuc3RvcExpbmUoKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludEJvb2tQYWdlcyhcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vYW50aXFcIjpcclxuXHRcdFx0XHQgICAgYXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0ICAgIGFwcC5wcmludFZpZGVvKFwiYW50aXFcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdCAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRWaWRlbyhcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuc3RvcExpbmUoKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludFZpZGVvKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRUZXN0UGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHQgXHRhcHAuZ29CYWNrKCk7XHJcblx0XHQgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIsXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwic3RvcnlcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JhY2soKTtcclxuXHRcdCAgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCR0LDRgdC90Lgg0JrRgNGL0LvQvtCy0LBcIixcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHQgICAgYXBwLmdvQmFjaygpO1xyXG5cdFx0ICAgICAgXHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiLFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ29Gcm9udFwiOlxyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3Jlc2V0XCI6XHJcblx0XHRcdFx0XHRhcHAudHJpZ2dlcignVGVzdHM6Q2xlYXJlZCcpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjc291bmRcIjpcclxuXHRcdFx0XHRcdGFwcC5hdWRpb1N3aWN0Y2hlcigpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNmcm9tVGVzdFRvVmlkZW9cIjpcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQkNC90YLQuNGH0L3Ri9C1INC80L7RgtC40LLRi1wiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLWhpc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHQgIH0sXHJcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR0aGlzLmxvYWRlZE1vZHVsZXMgPSBbXTtcclxuXHRcclxuXHRcdFx0dGhpcy5vbignRGlzcGxheTpMb2FkJywgZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0XHRzZWxmLnJlbmRlcigpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfQoNC10L3QtNC10YAg0Y3QutGA0LDQvdCwIFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQstC10YDRiNC10L0nKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCfQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C+0LbQtdC90LjRjyDQt9Cw0LLQtdGA0YjQtdC90LAnKTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRyb3V0ZTogZnVuY3Rpb24obGluaywgbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcItCX0LDQv9GD0YHQutCw0LXQvCBSb3V0ZSDQuiBcIiwgbGluaywgXCIgYyDQvNC+0LTRg9C70Y/QvNC4IFwiLG1vZHVsZXNMaXN0KVxyXG5cdFx0XHR0aGlzLmxpbmsgPSBsaW5rO1xyXG5cdFxyXG5cdFx0XHQvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0L/QvtC00LrQu9GO0YfQsNC10LzRi9GFINC80L7QtNGD0LvQtdC5LCDQtdGB0LvQuCDQuNGFINC90LXRgiDQt9Cw0LPRgNGD0LbQsNC10Lwg0YLQvtC70YzQutC+INGI0LDQsdC70L7QvVxyXG5cdFx0XHRpZiAoIW1vZHVsZXNMaXN0KXtcclxuXHRcdFx0XHR0aGlzLmxvYWRUZW1wbGF0ZShsaW5rKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyDQndCw0YjQu9C4INC80L7QtNGD0LvRjCwg0LjQu9C4INC80L7QtNGD0LvQuC4g0JfQsNC/0YPRgdC60LDQtdC8INC40YUg0LfQsNCz0YDRg9C30LrRgyDQsiDQutC+0L3RgtC10LrRgdGCINC/0YDQuNC70L7QttC10L3QuNGPLlxyXG5cdFx0XHRcdHRoaXMubG9hZE1vZHVsZXMobW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vINCc0L7QtNGD0LvRjCDQuNC70Lgg0LzQvtC00YPQu9C4INC30LDQs9GA0YPQttC10L3Riy4g0J3QsNGH0LjQvdCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINGI0LDQsdC70L7QvdCwLlxyXG5cdFx0XHRcdHRoaXMub2ZmKCdNb2R1bGU6TG9hZCcpLm9uKCdNb2R1bGU6TG9hZCcsIGZ1bmN0aW9uKG1vZHVsZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKHRoaXMubGluayk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQvNC+0LTRg9C70Y8o0LXQuSlcIicgKyBtb2R1bGVzICsgJ1wiINC30LDQstC10YDRiNC10L3QsCcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ9CX0LDQs9GA0YPQt9C60LAg0K3QutGA0LDQvdCwXCInICsgdGhpcy5saW5rICsgJ1wiINC90LDRh9Cw0LvQsNGB0YwnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRUZW1wbGF0ZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUsXHJcblx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUgKyAnLmh0bWwnLFxyXG5cdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfQrdC60YDQsNC9IFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQs9GA0YPQttC10L0nKTtcclxuXHRcdFx0XHRfLmV4dGVuZChzZWxmLCBqcyk7XHJcblx0XHRcdFx0c2VsZi5odG1sID0gJChodG1sKTtcclxuXHRcdFx0XHRzZWxmLmxvYWRDc3MoZGlzcGxheU5hbWUsICdkaXNwbGF5Jyk7XHJcblx0XHRcdFx0c2VsZi50cmlnZ2VyKCdEaXNwbGF5OkxvYWQnLCBkaXNwbGF5TmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRNb2R1bGVzOiBmdW5jdGlvbihtb2R1bGVzTGlzdCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8v0JfQsNCz0YDRg9C20LDQtdC8INC80L7QtNGD0LvQuC5cclxuXHRcdFx0bW9kdWxlc0xpc3QuZm9yRWFjaChmdW5jdGlvbihtb2R1bGUsIGkpe1xyXG5cdFx0XHRcdC8vIGlmICghXy5pbmNsdWRlKHNlbGYubG9hZGVkTW9kdWxlcywgbW9kdWxlKSkge1xyXG5cdFx0XHRcdFx0cmVxdWlyZShbXHJcblx0XHRcdFx0XHRcdCcuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgLFxyXG5cdFx0XHRcdFx0XHQndGV4dCEuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgKyAnLmh0bWwnXHJcblx0XHRcdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JzQvtC00YPQu9GMIFwiJyArIG1vZHVsZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0XHRcdHNlbGZbbW9kdWxlICsgJ0h0bWwnXSA9ICQoaHRtbCk7XHJcblx0XHRcdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5sb2FkQ3NzKG1vZHVsZSwgJ21vZHVsZScpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLmxvYWRlZE1vZHVsZXMucHVzaChtb2R1bGUpO1xyXG5cdFx0XHRcdFx0XHRpZigobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSkgPT09IGkpe1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vIH1lbHNlIGlmIChtb2R1bGVzTGlzdC5sZW5ndGggLSAxID09IGkpe1xyXG5cdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ21vZHVsZXNMaXN0Lmxlbmd0aCcsIG1vZHVsZXNMaXN0Lmxlbmd0aClcclxuXHRcdFx0XHQvLyBcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkQ3NzOiBmdW5jdGlvbihtb2R1bGUsIG1kKSB7XHJcblx0XHRcdHZhciBwYXJ0VXBsID0gbWQgPT09ICdkaXNwbGF5JyA/ICdkaXNwbGF5cycgOiAnbW9kdWxlcyc7XHJcblx0XHRcdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHRcdGxpbmsudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdFx0bGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdFx0bGluay5ocmVmID0gJy4uLy4uL3RlbXBsYXRlLycgKyBwYXJ0VXBsICsgJy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5jc3MnO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cmVuZGVySGFuZGxlYmFyc1RlbXBsYXRlOiBmdW5jdGlvbihzZWxlY3RvcixkYXRhKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCfQodC+0LfQtNCw0LXQvCDRiNCw0LHQu9C+0L0gSGFuZGxlYmFycycsIHNlbGVjdG9yLCBkYXRhKTtcclxuXHRcclxuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKCQoc2VsZWN0b3IpLmh0bWwoKSk7XHJcblx0XHRcdHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRhcHAgPSBuZXcgQXBwKCk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gUm91dGVyIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0dmFyIEFwcFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xyXG5cdCAgICByb3V0ZXM6IHtcclxuXHQgICAgICAgIFwiXCI6IFwiZGVmYXVsdFJvdXRlXCIsXHJcblx0ICAgICAgICBcImxlc3NvbnNcIjpcImdhbGxlcnlcIixcclxuXHQgICAgICAgIFwiZ2FtZXMvOnRlc3RcIjpcImdhbWVzXCIsXHJcblx0ICAgICAgICBcImJvb2svOm5hbWVcIjpcInJlYWRlclwiLFxyXG5cdCAgICAgICAgXCJ2aWRlby86bmFtZVwiOlwidmlkZW9cIlxyXG5cdCAgICAgICAgLy8gbWF0Y2hlcyBodHRwOi8vZXhhbXBsZS5jb20vI2FueXRoaW5nLWhlcmVcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8vIEluaXRpYXRlIHRoZSByb3V0ZXJcclxuXHR2YXIgcm91dGVyID0gbmV3IEFwcFJvdXRlcjtcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmRlZmF1bHRSb3V0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ21haW5TY3JlZW4nLCBbJ3ByZWxvYWRlciddKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FsbGVyeScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpnYW1lcycsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpyZWFkZXInLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6dmlkZW8nLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6cmVzZXQnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdC8vIFN0YXJ0IEJhY2tib25lIGhpc3RvcnkgYSBuZWNlc3Nhcnkgc3RlcCBmb3IgYm9va21hcmthYmxlIFVSTCdzXHJcblx0QmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xyXG5cclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
