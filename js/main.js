require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min",backgroundVideo:"background-video/jquery.backgroundvideo"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax","backgroundVideo"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,a,r,t){return e=parseFloat(e),r=parseFloat(r),{"+":e+r,"-":e-r,"*":e*r,"/":e/r,"%":e%r,"==":e==r}[a]}),Handlebars.registerHelper("ifCond",function(e,a,r,t){switch(a){case"==":return e==r?t.fn(this):t.inverse(this);case"===":return e===r?t.fn(this):t.inverse(this);case"<":return r>e?t.fn(this):t.inverse(this);case"<=":return r>=e?t.fn(this):t.inverse(this);case">":return e>r?t.fn(this):t.inverse(this);case">=":return e>=r?t.fn(this):t.inverse(this);case"&&":return e&&r?t.fn(this):t.inverse(this);case"||":return e||r?t.fn(this):t.inverse(this);default:return t.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var a=$(e.target).closest("a").attr("href");switch(a){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.stopLine(),app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#book/story":app.stopLine(),app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#book/antiq":app.stopLine(),app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#video/antiq":app.stopLine(),app.printVideo("antiq"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#video/story":app.stopLine(),app.printVideo("story"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#video/history":app.stopLine(),app.printVideo("history"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"#games/antiq":app.printMap("antiq"),app.printTestPages("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.printTestPages("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.printTestPages("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(a,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.trigger("Tests:Cleared"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории")}},initialize:function(){var e=this;this.loadedModules=[],this.on("Display:Load",function(a){e.render(),console.log('Рендер экрана "'+a+'" завершен')}),console.log("Инициализация приложения завершена")},route:function(e,a){console.log("Запускаем Route к ",e," c модулями ",a),this.link=e,a?(this.loadModules(a),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var a=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(r,t){console.log('Экран "'+e+'" загружен'),_.extend(a,r),a.html=$(t),a.loadCss(e,"display"),a.trigger("Display:Load",e)})},loadModules:function(e){var a=this;e.forEach(function(r,t){require(["../../template/modules/"+r+"/"+r,"text!../../template/modules/"+r+"/"+r+".html"],function(o,s){console.log('Модуль "'+r+'" загружен'),a[r+"Html"]=$(s),_.extend(a,o),a.loadCss(r,"module"),a.loadedModules.push(r),e.length-1===t&&a.trigger("Module:Load",e)})})},loadCss:function(e,a){var r="display"===a?"displays":"modules",t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href="../../template/"+r+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(t)},renderHandlebarsTemplate:function(e,a){console.log("Создаем шаблон Handlebars",e,a);var r=Handlebars.compile($(e).html());return r(a)}}),app=new App;var a=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),r=new a;r.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),r.on("route:gallery",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:games",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:reader",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:video",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),r.on("route:reset",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJiYWNrZ3JvdW5kVmlkZW8iLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInN0b3BMaW5lIiwicHJpbnRCb29rUGFnZXMiLCJicmVhZGNydW1ic1JlbmRlciIsImdvVG9wIiwicmVwbGFjZSIsInByaW50VmlkZW8iLCJnb0JvdHRvbSIsInByaW50TWFwIiwicHJpbnRUZXN0UGFnZXMiLCJnb0JhY2siLCJ0ZXN0QnJlYWRjcnVtYnNSZW5kZXIiLCJnb0Zyb250IiwiZ2V0QWN0aXZlVGFiIiwiYXVkaW9Td2ljdGNoZXIiLCJkZWFjdGl2YXRlUXVlc3Rpb24iLCJjaGVja0ltYWdlUHJvZ3Jlc3MiLCJpbml0aWFsaXplIiwic2VsZiIsImxvYWRlZE1vZHVsZXMiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwiY29uc29sZSIsImxvZyIsInJvdXRlIiwibGluayIsIm1vZHVsZXNMaXN0IiwibG9hZE1vZHVsZXMiLCJvZmYiLCJtb2R1bGVzIiwibG9hZFRlbXBsYXRlIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsInB1c2giLCJsZW5ndGgiLCJtZCIsInBhcnRVcGwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwicmVsIiwiaHJlZiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJIYW5kbGViYXJzVGVtcGxhdGUiLCJzZWxlY3RvciIsImRhdGEiLCJ0ZW1wbGF0ZSIsImNvbXBpbGUiLCJBcHBSb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZXMiLCJsZXNzb25zIiwiZ2FtZXMvOnRlc3QiLCJib29rLzpuYW1lIiwidmlkZW8vOm5hbWUiLCJyb3V0ZXIiLCJzZXRUaW1lb3V0Iiwic3RhcnQiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRQyxRQUNQQyxRQUFTLFNBQ1RDLE9BQ0NDLE9BQVUscUJBQ1ZDLFNBQVksb0JBQ1pDLEtBQVEsWUFDUkMsV0FBYyx3QkFDZEMsV0FBYyx3QkFDZEMsU0FBWSwrQkFDWkMsZ0JBQW1CLDJDQUVwQkMsTUFDQ04sVUFDQ08sTUFBTyxhQUFjLGFBS3hCLElBQUlDLEtBQ0hDLFVBQ0RkLFVBQ0MsYUFDQSxTQUNBLE9BQ0EsV0FDQSxhQUNBLFdBQ0EsbUJBQ0UsU0FBU1EsR0FDWE0sV0FBYU4sRUFFYk0sV0FBV0MsZUFBZSxPQUFRLFNBQVNDLEVBQVFDLEVBQVVDLEVBQVFDLEdBSWpFLE1BSEFILEdBQVNJLFdBQVdKLEdBQ3BCRSxFQUFTRSxXQUFXRixJQUdoQkcsSUFBS0wsRUFBU0UsRUFDZEksSUFBS04sRUFBU0UsRUFDZEssSUFBS1AsRUFBU0UsRUFDZE0sSUFBS1IsRUFBU0UsRUFDZE8sSUFBS1QsRUFBU0UsRUFDZFEsS0FBTVYsR0FBVUUsR0FDbEJELEtBRU5ILFdBQVdDLGVBQWUsU0FBVSxTQUFVWSxFQUFJVixFQUFVVyxFQUFJVCxHQUU1RCxPQUFRRixHQUNKLElBQUssS0FDRCxNQUFRVSxJQUFNQyxFQUFNVCxFQUFRVSxHQUFHQyxNQUFRWCxFQUFRWSxRQUFRRCxLQUMzRCxLQUFLLE1BQ0QsTUFBUUgsS0FB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USxVQUV0SHNDLFdBQVcsV0FDVHBHLElBQUl3QyxrQkFBa0IseUJBQXlCeEMsSUFBSWtELGlCQUNuRCxPQUdOaUQsRUFBTzFDLEdBQUcsY0FBZSxXQUNyQnpELElBQUk4RCxNQUFNLFdBQVksWUFBWSxZQUFhLFVBQVcsV0FBVyxTQUFVLGdCQUFnQixPQUFPLFFBQVEsUUFBUSxVQUV0SHNDLFdBQVcsV0FDVHBHLElBQUl3QyxrQkFBa0IseUJBQXlCeEMsSUFBSWtELGlCQUNuRCxPQUlOOUIsU0FBU2UsUUFBUWtFIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlLmNvbmZpZyh7XHJcblx0YmFzZVVybDogJ3ZlbmRvcicsXHJcblx0cGF0aHM6IHtcclxuXHRcdCdqcXVlcnknOiAnanF1ZXJ5L2Rpc3QvanF1ZXJ5JyxcclxuXHRcdCdiYWNrYm9uZSc6ICdiYWNrYm9uZS9iYWNrYm9uZScsXHJcblx0XHQndGV4dCc6ICd0ZXh0L3RleHQnLFxyXG5cdFx0J3VuZGVyc2NvcmUnOiAndW5kZXJzY29yZS91bmRlcnNjb3JlJyxcclxuXHRcdCdoYW5kbGViYXJzJzogJ2hhbmRsZWJhcnMvaGFuZGxlYmFycycsXHJcblx0XHQncGFyYWxsYXgnOiAncGFyYWxsYXgvZGVwbG95L3BhcmFsbGF4Lm1pbicsXHJcblx0XHQnYmFja2dyb3VuZFZpZGVvJzogJ2JhY2tncm91bmQtdmlkZW8vanF1ZXJ5LmJhY2tncm91bmR2aWRlbydcclxuXHR9LFxyXG5cdHNoaW06IHtcclxuXHRcdCdiYWNrYm9uZSc6IHtcclxuXHRcdFx0ZGVwczogWyd1bmRlcnNjb3JlJywgJ2pxdWVyeSddXHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbnZhciBhcHAsXHJcblx0SGFuZGxlYmFycztcclxucmVxdWlyZShbXHJcblx0J2hhbmRsZWJhcnMnLFxyXG5cdCdqcXVlcnknLFxyXG5cdCd0ZXh0JyxcclxuXHQnYmFja2JvbmUnLFxyXG5cdCd1bmRlcnNjb3JlJyxcclxuXHRcInBhcmFsbGF4XCIsXHJcblx0XCJiYWNrZ3JvdW5kVmlkZW9cIlxyXG5dLCBmdW5jdGlvbihoYW5kbGViYXJzKSB7XHJcblx0SGFuZGxlYmFycyA9IGhhbmRsZWJhcnM7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gSGFuZGxlYmFycyBIZWxwZXJzLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwibWF0aFwiLCBmdW5jdGlvbihsdmFsdWUsIG9wZXJhdG9yLCBydmFsdWUsIG9wdGlvbnMpIHtcclxuXHQgICAgbHZhbHVlID0gcGFyc2VGbG9hdChsdmFsdWUpO1xyXG5cdCAgICBydmFsdWUgPSBwYXJzZUZsb2F0KHJ2YWx1ZSk7XHJcblx0ICAgICAgICBcclxuXHQgICAgcmV0dXJuIHtcclxuXHQgICAgICAgIFwiK1wiOiBsdmFsdWUgKyBydmFsdWUsXHJcblx0ICAgICAgICBcIi1cIjogbHZhbHVlIC0gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIqXCI6IGx2YWx1ZSAqIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiL1wiOiBsdmFsdWUgLyBydmFsdWUsXHJcblx0ICAgICAgICBcIiVcIjogbHZhbHVlICUgcnZhbHVlLFxyXG5cdCAgICAgICAgXCI9PVwiOiBsdmFsdWUgPT0gcnZhbHVlXHJcblx0ICAgIH1bb3BlcmF0b3JdO1xyXG5cdH0pO1xyXG5cdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmQ29uZCcsIGZ1bmN0aW9uICh2MSwgb3BlcmF0b3IsIHYyLCBvcHRpb25zKSB7XHJcblx0XHJcblx0ICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuXHQgICAgICAgIGNhc2UgJz09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc9PT0nOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgPT09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJzw9JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDw9IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID4gdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJz49JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID49IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICcmJic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSAmJiB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnfHwnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgfHwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEFwcCAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdEFwcCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcclxuXHRcdGVsOiAkKCcjYXBwJyksXHJcblx0XHRldmVudHM6IHtcclxuXHQgICAgXCJjbGljayBhXCI6XCJvcGVuXCJcclxuXHQgIH0sXHJcblx0ICBvcGVuOiBmdW5jdGlvbihlKXtcclxuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFxyXG5cdFx0XHR2YXIgdXJsID0gJChlLnRhcmdldCkuY2xvc2VzdChcImFcIikuYXR0cihcImhyZWZcIik7XHJcblx0XHJcblx0XHRcdHN3aXRjaCAodXJsKXtcclxuXHRcdFx0XHRjYXNlIFwiI2xlc3NvbnNcIjpcclxuXHRcdFx0XHRcdCQoXCJodG1sLGJvZHlcIikuY3NzKFwib3ZlcmZsb3cteVwiLFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuc3RvcExpbmUoKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludEJvb2tQYWdlcyhcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vYW50aXFcIjpcclxuXHRcdFx0XHQgICAgYXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0ICAgIGFwcC5wcmludFZpZGVvKFwiYW50aXFcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdCAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRWaWRlbyhcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuc3RvcExpbmUoKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludFZpZGVvKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRUZXN0UGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHQgXHRhcHAuZ29CYWNrKCk7XHJcblx0XHQgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIsXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwic3RvcnlcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JhY2soKTtcclxuXHRcdCAgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCR0LDRgdC90Lgg0JrRgNGL0LvQvtCy0LBcIixcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHQgICAgYXBwLmdvQmFjaygpO1xyXG5cdFx0ICAgICAgXHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiLFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ29Gcm9udFwiOlxyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3Jlc2V0XCI6XHJcblx0XHRcdFx0XHRhcHAudHJpZ2dlcignVGVzdHM6Q2xlYXJlZCcpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjc291bmRcIjpcclxuXHRcdFx0XHRcdGFwcC5hdWRpb1N3aWN0Y2hlcigpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNmcm9tVGVzdFRvVmlkZW9cIjpcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQkNC90YLQuNGH0L3Ri9C1INC80L7RgtC40LLRi1wiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLWhpc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHQgIH0sXHJcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR0aGlzLmxvYWRlZE1vZHVsZXMgPSBbXTtcclxuXHRcclxuXHRcdFx0dGhpcy5vbignRGlzcGxheTpMb2FkJywgZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0XHRzZWxmLnJlbmRlcigpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfQoNC10L3QtNC10YAg0Y3QutGA0LDQvdCwIFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQstC10YDRiNC10L0nKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCfQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C+0LbQtdC90LjRjyDQt9Cw0LLQtdGA0YjQtdC90LAnKTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRyb3V0ZTogZnVuY3Rpb24obGluaywgbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcItCX0LDQv9GD0YHQutCw0LXQvCBSb3V0ZSDQuiBcIiwgbGluaywgXCIgYyDQvNC+0LTRg9C70Y/QvNC4IFwiLG1vZHVsZXNMaXN0KVxyXG5cdFx0XHR0aGlzLmxpbmsgPSBsaW5rO1xyXG5cdFxyXG5cdFx0XHQvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0L/QvtC00LrQu9GO0YfQsNC10LzRi9GFINC80L7QtNGD0LvQtdC5LCDQtdGB0LvQuCDQuNGFINC90LXRgiDQt9Cw0LPRgNGD0LbQsNC10Lwg0YLQvtC70YzQutC+INGI0LDQsdC70L7QvVxyXG5cdFx0XHRpZiAoIW1vZHVsZXNMaXN0KXtcclxuXHRcdFx0XHR0aGlzLmxvYWRUZW1wbGF0ZShsaW5rKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyDQndCw0YjQu9C4INC80L7QtNGD0LvRjCwg0LjQu9C4INC80L7QtNGD0LvQuC4g0JfQsNC/0YPRgdC60LDQtdC8INC40YUg0LfQsNCz0YDRg9C30LrRgyDQsiDQutC+0L3RgtC10LrRgdGCINC/0YDQuNC70L7QttC10L3QuNGPLlxyXG5cdFx0XHRcdHRoaXMubG9hZE1vZHVsZXMobW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vINCc0L7QtNGD0LvRjCDQuNC70Lgg0LzQvtC00YPQu9C4INC30LDQs9GA0YPQttC10L3Riy4g0J3QsNGH0LjQvdCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINGI0LDQsdC70L7QvdCwLlxyXG5cdFx0XHRcdHRoaXMub2ZmKCdNb2R1bGU6TG9hZCcpLm9uKCdNb2R1bGU6TG9hZCcsIGZ1bmN0aW9uKG1vZHVsZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKHRoaXMubGluayk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQvNC+0LTRg9C70Y8o0LXQuSlcIicgKyBtb2R1bGVzICsgJ1wiINC30LDQstC10YDRiNC10L3QsCcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ9CX0LDQs9GA0YPQt9C60LAg0K3QutGA0LDQvdCwXCInICsgdGhpcy5saW5rICsgJ1wiINC90LDRh9Cw0LvQsNGB0YwnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRUZW1wbGF0ZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUsXHJcblx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUgKyAnLmh0bWwnLFxyXG5cdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfQrdC60YDQsNC9IFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQs9GA0YPQttC10L0nKTtcclxuXHRcdFx0XHRfLmV4dGVuZChzZWxmLCBqcyk7XHJcblx0XHRcdFx0c2VsZi5odG1sID0gJChodG1sKTtcclxuXHRcdFx0XHRzZWxmLmxvYWRDc3MoZGlzcGxheU5hbWUsICdkaXNwbGF5Jyk7XHJcblx0XHRcdFx0c2VsZi50cmlnZ2VyKCdEaXNwbGF5OkxvYWQnLCBkaXNwbGF5TmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRNb2R1bGVzOiBmdW5jdGlvbihtb2R1bGVzTGlzdCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8v0JfQsNCz0YDRg9C20LDQtdC8INC80L7QtNGD0LvQuC5cclxuXHRcdFx0bW9kdWxlc0xpc3QuZm9yRWFjaChmdW5jdGlvbihtb2R1bGUsIGkpe1xyXG5cdFx0XHRcdC8vIGlmICghXy5pbmNsdWRlKHNlbGYubG9hZGVkTW9kdWxlcywgbW9kdWxlKSkge1xyXG5cdFx0XHRcdFx0cmVxdWlyZShbXHJcblx0XHRcdFx0XHRcdCcuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgLFxyXG5cdFx0XHRcdFx0XHQndGV4dCEuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgKyAnLmh0bWwnXHJcblx0XHRcdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JzQvtC00YPQu9GMIFwiJyArIG1vZHVsZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0XHRcdHNlbGZbbW9kdWxlICsgJ0h0bWwnXSA9ICQoaHRtbCk7XHJcblx0XHRcdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5sb2FkQ3NzKG1vZHVsZSwgJ21vZHVsZScpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLmxvYWRlZE1vZHVsZXMucHVzaChtb2R1bGUpO1xyXG5cdFx0XHRcdFx0XHRpZigobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSkgPT09IGkpe1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vIH1lbHNlIGlmIChtb2R1bGVzTGlzdC5sZW5ndGggLSAxID09IGkpe1xyXG5cdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ21vZHVsZXNMaXN0Lmxlbmd0aCcsIG1vZHVsZXNMaXN0Lmxlbmd0aClcclxuXHRcdFx0XHQvLyBcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkQ3NzOiBmdW5jdGlvbihtb2R1bGUsIG1kKSB7XHJcblx0XHRcdHZhciBwYXJ0VXBsID0gbWQgPT09ICdkaXNwbGF5JyA/ICdkaXNwbGF5cycgOiAnbW9kdWxlcyc7XHJcblx0XHRcdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHRcdGxpbmsudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdFx0bGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdFx0bGluay5ocmVmID0gJy4uLy4uL3RlbXBsYXRlLycgKyBwYXJ0VXBsICsgJy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5jc3MnO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cmVuZGVySGFuZGxlYmFyc1RlbXBsYXRlOiBmdW5jdGlvbihzZWxlY3RvcixkYXRhKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCfQodC+0LfQtNCw0LXQvCDRiNCw0LHQu9C+0L0gSGFuZGxlYmFycycsIHNlbGVjdG9yLCBkYXRhKTtcclxuXHRcclxuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKCQoc2VsZWN0b3IpLmh0bWwoKSk7XHJcblx0XHRcdHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRhcHAgPSBuZXcgQXBwKCk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gUm91dGVyIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0dmFyIEFwcFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xyXG5cdCAgICByb3V0ZXM6IHtcclxuXHQgICAgICAgIFwiXCI6IFwiZGVmYXVsdFJvdXRlXCIsXHJcblx0ICAgICAgICBcImxlc3NvbnNcIjpcImdhbGxlcnlcIixcclxuXHQgICAgICAgIFwiZ2FtZXMvOnRlc3RcIjpcImdhbWVzXCIsXHJcblx0ICAgICAgICBcImJvb2svOm5hbWVcIjpcInJlYWRlclwiLFxyXG5cdCAgICAgICAgXCJ2aWRlby86bmFtZVwiOlwidmlkZW9cIlxyXG5cdCAgICAgICAgLy8gbWF0Y2hlcyBodHRwOi8vZXhhbXBsZS5jb20vI2FueXRoaW5nLWhlcmVcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8vIEluaXRpYXRlIHRoZSByb3V0ZXJcclxuXHR2YXIgcm91dGVyID0gbmV3IEFwcFJvdXRlcjtcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmRlZmF1bHRSb3V0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ21haW5TY3JlZW4nLCBbJ3ByZWxvYWRlciddKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FsbGVyeScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpnYW1lcycsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpyZWFkZXInLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6dmlkZW8nLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6cmVzZXQnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdC8vIFN0YXJ0IEJhY2tib25lIGhpc3RvcnkgYSBuZWNlc3Nhcnkgc3RlcCBmb3IgYm9va21hcmthYmxlIFVSTCdzXHJcblx0QmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xyXG5cclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
